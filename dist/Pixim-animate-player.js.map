{"version":3,"file":"Pixim-animate-player.js","sources":["../src/common/global.ts","../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/pixim/Player.ts","../src/common/core.ts"],"sourcesContent":["/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","/*!\n * @tawaship/pixi-animate-core.js - v1.0.3\n * \n * @require pixi.js v5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport { Container, Sprite, Graphics, BaseTexture, Texture, LINE_JOIN, Text, filters } from 'pixi.js';\n\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiMovieClip extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Sprite.html\r\n * @private\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiShape extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Graphics.html\r\n * @private\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiTextContainer extends Container {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiButtonHelper extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\n\n/**\r\n * @ignore\r\n */\r\nconst createjsOrigin = {\r\n\tDisplayObject: createjs.DisplayObject,\r\n\tMovieClip: createjs.MovieClip,\r\n\tSprite: createjs.Sprite,\r\n\tContainer: createjs.Container,\r\n\tText: createjs.Text,\r\n\tShape: createjs.Shape,\r\n\tGraphics: createjs.Graphics,\r\n\tButtonHelper: createjs.ButtonHelper\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction overrideCreatejs(self, pixi) {\r\n\tself._originParams = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregx: 0,\r\n\t\tregy: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n\t\r\n\tself._pixiData = {\r\n\t\tinstance: pixi,\r\n\t\tregObj: pixi.anchor || pixi.pivot,\r\n\t\tevents: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = createjsOrigin.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t},\r\n\tgetPixi: {\r\n\t\tvalue: function() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction makeClass(parent, unuseAppendix = false) {\r\n\tclass CjsWrap extends parent {\r\n\t\t_overrideCreatejs(pixi) {\r\n\t\t\toverrideCreatejs(this, pixi);\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (!unuseAppendix) {\r\n\t\tObject.defineProperties(CjsWrap.prototype, appendixDescriptor);\r\n\t}\r\n\t\r\n\treturn CjsWrap;\r\n}\r\n\r\ncreatejs.MovieClip = class MovieClip extends makeClass(createjsOrigin.MovieClip) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiMovieClip(this));\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(new PixiMovieClip(this));\r\n\t\tthis._pixiData.subInstance = this._pixiData.instance;//.addChild(new PIXI.Container());\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\taddChild(child) {\r\n\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child, index) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n};\r\n\r\ncreatejs.Sprite = class Sprite extends makeClass(createjsOrigin.Sprite) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiSprite(this));\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(new PixiSprite(this));\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\tgotoAndStop() {\r\n\t\tsuper.gotoAndStop(...arguments);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n};\r\n\r\ncreatejs.Shape = class Shape extends makeClass(createjsOrigin.Shape) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiShape(this));\r\n\t\tthis._pixiData.masked = [];\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t}\r\n\t\t\r\n\t\treturn this._graphics = value;\r\n\t}\r\n};\r\n\r\ncreatejs.Graphics = class Graphics extends makeClass(createjsOrigin.Graphics) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiGraphics(this));\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\t\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tmoveTo(x, y) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x, y) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTon(x1, y1, x2, y2, radius) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx, cpy, x, y) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\tconst points = this._pixiData.instance.currentPath.points;\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tcolor = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(color[0]) * COLOR_RED + Number(color[1]) * COLOR_GREEN + Number(color[2]);\r\n\t\tres.alpha = Number(color[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._pixiData.instance.lineStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : caps,\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : joints,\r\n\t\t\tmiterLimit: miterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x, y, w, h, radius) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x, y, radius) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_JOIN.BUTT,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\nObject.defineProperties(createjs.Graphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: createjs.Graphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: createjs.Graphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: createjs.Graphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: createjs.Graphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: createjs.Graphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: createjs.Graphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: createjs.Graphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: createjs.Graphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: createjs.Graphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: createjs.Graphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: createjs.Graphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: createjs.Graphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: createjs.Graphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: createjs.Graphics.prototype.drawPolyStar\r\n\t}\r\n});\r\n\r\ncreatejs.Text = class Text$1 extends makeClass(createjsOrigin.Text) {\r\n\tconstructor(text, font, color) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tconst t = new Text(text, {\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._overrideCreatejs(new PixiTextContainer(this, t));\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tthis._originParams = Object.assign(this._originParams, {\r\n\t\t\ttext: text,\r\n\t\t\tfont: font,\r\n\t\t\tcolor: color,\r\n\t\t\ttextAlign: 'left',\r\n\t\t\tlineHeight: 0,\r\n\t\t\tlineWidth: 0\r\n\t\t});\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._originParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\treturn this._originParams.text = text;\r\n\t}\r\n\t\r\n\t_parseFont(font) {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontSize: Number(p.shift().replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._originParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\treturn this._originParams.font = font;\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._originParams.color;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\treturn this._originParams.color = color;\r\n\t}\r\n\t\r\n\t_align(align) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._originParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\treturn this._originParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._originParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.lineHeight = height;\r\n\t\t\r\n\t\treturn this._originParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._originParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.lineWidthWrap = width;\r\n\t\t\r\n\t\treturn this._originParams.lineWidth = width;\r\n\t}\r\n};\r\n\r\ncreatejs.ButtonHelper = class ButtonHelper extends makeClass(createjsOrigin.ButtonHelper, true) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiButtonHelper(this));\r\n\t\t\r\n\t\tconst createjs = arguments[0];\r\n\t\tconst pixi = createjs._pixiData.instance;\r\n\t\t\r\n\t\tconst baseFrame = arguments[1];\r\n\t\tconst overFrame = arguments[2];\r\n\t\tconst downFrame = arguments[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = arguments[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n};\n\n/**\r\n * Prepare createjs content published with Adobe Animate.\r\n * @param id \"lib.properties.id\" in Animate content.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction prepareAnimateAsync(id, basepath) {\r\n    const comp = window.AdobeAn.getComposition(id);\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        const loader = new window.createjs.LoadQueue(false);\r\n        loader.installPlugin(window.createjs.Sound);\r\n        loader.addEventListener('fileload', function (evt) {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', function (evt) {\r\n            resolve(evt);\r\n        });\r\n        if (basepath) {\r\n            basepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n            const m = lib.properties.manifest;\r\n            for (let i = 0; i < m.length; i++) {\r\n                m[i].src = basepath + m[i].src;\r\n            }\r\n        }\r\n        loader.loadManifest(lib.properties.manifest);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { prepareAnimateAsync };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import * as Core from '../common/core';\r\nimport * as _Pixim from '@tawaship/pixim.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace Pixim {\r\n\texport namespace animate {\r\n\t\texport type TPlayerOption = {\r\n\t\t\tuseSynchedTimeline?: boolean\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player extends _Pixim.Application {\r\n\t\t\tprivate _id: string;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @param id \"lib.properties.id\" in Animate content.\r\n\t\t\t * @param rootName Root class name of Animate content.\r\n\t\t\t * @param basepath Directory path of Animate content.\r\n\t\t\t * @param pixiOptions Options of PIXI.Application.\r\n\t\t\t * @param piximOptions Options of Pixim.Application.\r\n\t\t\t */\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}, piximOptions: _Pixim.TApplicationOption = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib: Core.TAnimateLibrary = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tsuper(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}), piximOptions);\r\n\t\t\t\t\r\n\t\t\t\tthis._id = id;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleTick.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Prepare createjs content published with Adobe Animate.\r\n\t\t\t */\r\n\t\t\tprepareAsync(options: TPlayerOption = {}) {\r\n\t\t\t\treturn Core.prepareAnimateAsync(this._id, this._basepath)\r\n\t\t\t\t\t.then((lib: Core.TAnimateLibrary) => {\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tCore.initStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst Content = _Pixim.Content.create();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tContent.defineLibraries({\r\n\t\t\t\t\t\t\troot: class Root extends _Pixim.Container {\r\n\t\t\t\t\t\t\t\tconstructor($: any) {\r\n\t\t\t\t\t\t\t\t\tsuper();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.addChild($.vars.root);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst content = new Content();\r\n\t\t\t\t\t\tcontent.addVars({\r\n\t\t\t\t\t\t\troot: exportRoot.getPixi()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.app.render();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn this.attachAsync(content);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\twindow.createjs.Ticker.removeEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleTick() {\r\n\t\t\t\tthis._stage._tickFunction();\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TPlayerOption = Pixim.animate.TPlayerOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = Pixim.animate.Player;","import * as PIXI from 'pixi.js';\r\nimport * as Core from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import prepareAnimateAsync = Core.prepareAnimateAsync;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TAnimateLibrary = Core.TAnimateLibrary;\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage: any, options: any = {}) {\r\n\tif (options.useSynchedTimeline) {\r\n\t\tfunction containerDrawFunction() {\r\n\t\t\tconst list = this.children.slice();\r\n\t\t\tfor (let i = 0,l = list.length; i < l; i++) {\r\n\t\t\t\tconst child = list[i];\r\n\t\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\tchild.draw();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tfunction imageDrawFunction() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tObject.defineProperties(window.createjs.MovieClip.prototype, {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: function() {\r\n\t\t\t\t\tthis._updateState();\r\n\t\t\t\t\treturn this._containerDraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_containerDraw: {\r\n\t\t\t\tvalue: containerDrawFunction\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst imageDescriptors = {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: imageDrawFunction\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tObject.defineProperties(window.createjs.Sprite.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Graphics.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Shape.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Text.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Bitmap.prototype, imageDescriptors);\r\n\t\t\r\n\t\tstage.update = function(props) {\r\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tthis.dispatchEvent(\"drawstart\");\n\t\t\tif (this.autoClear) { this.clear(); }\n\t\t\t\n\t\t\tif (this._webGLContext) {\n\t\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.draw();\n\t\t\t}\r\n\t\t\t\n\t\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t}\r\n\t\t\r\n\t\tstage.draw = containerDrawFunction;\r\n\t\t\r\n\t\tstage._updateFunction = stage.update;\r\n\t} else {\r\n\t\tstage._updateFunction = stage.tick;\r\n\t}\r\n\t\r\n\tif (stage._handleTick) {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t\tstage._handleTick();\r\n\t\t};\r\n\t} else {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t};\r\n\t}\r\n}"],"names":["Object","defineProperties","window","playSound","value","id","loop","createjs","Sound","play","interrupt","INTERRUPT_EARLY","PixiMovieClip","cjs","super","this","_createjs","getCreatejs","Container","PixiSprite","Sprite","PixiShape","PixiGraphics","Graphics","PixiTextContainer","text","_text","prototypeAccessors","PixiButtonHelper","createjsOrigin","DisplayObject","MovieClip","Text","Shape","ButtonHelper","let","_isDown","EventMap","mousedown","types","factory","self","cb","e","currentTarget","target","const","ev","data","rawX","global","x","rawY","y","rollover","rollout","pressmove","pressup","DEG_TO_RAD","Math","PI","appendixDescriptor","get","_originParams","set","_pixiData","instance","scaleX","scale","scaleY","skewX","skew","skewY","regX","regObj","regY","rotation","visible","alpha","_off","renderable","addEventListener","type","Function","func","i","length","t","events","push","origin","on","interactive","prototype","apply","arguments","removeEventListener","list","j","off","splice","res","listeners","_listeners","removeAllEventListeners","removeAllListeners","_pixi","mask","masked","once","parent","addChild","filters","subInstance","f","ColorMatrixFilter","m","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","children","n","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","getPixi","makeClass","unuseAppendix","CjsWrap","_overrideCreatejs","pixi","regx","regy","anchor","pivot","overrideCreatejs","initialize","child","addChildAt","index","removeChild","removeChildAt","removeAllChldren","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","prototypeAccessors$1","graphics","_graphics","beginFill","strokeFill","strokeAlpha","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTon","x1","y1","x2","y2","radius","arcTo","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","currentPath","points","clear","_parseColor","color","charAt","parseInt","slice","replace","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineStyle","width","cap","LineCap","join","LineJoin","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","0","LINE_JOIN","BUTT","1","ROUND","2","SQUARE","MITER","BEVEL","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","font","_font","_parseFont","fontSize","fontFamily","fill","wordWrap","assign","textAlign","lineHeight","lineWidth","prototypeAccessors$2","_align","p","shift","style","align","height","lineWidthWrap","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","Pixim","prepareAnimateAsync","basepath","comp","AdobeAn","getComposition","Error","lib","getLibrary","Promise","resolve","reject","properties","manifest","loader","LoadQueue","installPlugin","evt","images","getImages","item","result","handleFileLoad","src","loadManifest","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","animate","Player","rootName","pixiOptions","piximOptions","root","prop","backgroundColor","_id","_rootClass","_basepath","Ticker","framerate","fps","_handleTick","bind","prepareAsync","options","Core.prepareAnimateAsync","exportRoot","_stage","Stage","stage","useSynchedTimeline","containerDrawFunction","l","isVisible","draw","_updateState","_containerDraw","imageDescriptors","Bitmap","update","props","tickOnUpdate","tick","dispatchEvent","autoClear","_webGLContext","_batchDraw","_autoPurge","_drawID","purgeTextures","_updateFunction","_tickFunction","Core.initStage","compositionLoaded","Content","_Pixim.Content","create","defineLibraries","$","vars","content","addVars","app","render","attachAsync","stop","_Pixim.Application"],"mappings":";;;;;;;;;;IAYAA,OAAOC,iBAAiBC,QAAQ;QAC/BC,WAAW;YACVC,OATF,SAAmBC,IAAYC;gBAC9B,mCAD8C,IACvCJ,OAAOK,SAASC,MAAMC,KAAKJ,IAAI;oBACrCK,WAAWR,OAAOK,SAASC,MAAMG;oBACjCL,MAAMA;;;;;;;;;;;;ICMR,IAAMM;QACF,uBAAYC;YACRC,sBACAC,KAAKC,YAAYH;;;qFAErBI;YACI,OAAOF,KAAKC;;MANQE,oBAatBC;QACF,oBAAYN;YACRC,mBACAC,KAAKC,YAAYH;;;4EAErBI;YACI,OAAOF,KAAKC;;MANKI,iBAanBC;QACF,mBAAYR;YACRC,sBACAC,KAAKC,YAAYH;;;yEAErBI;YACI,OAAOF,KAAKC;;MANIE,oBAalBI;QACF,sBAAYT;YACRC,qBACAC,KAAKC,YAAYH;;;kFAErBI;YACI,OAAOF,KAAKC;;MANOO,mBAarBC;QACF,2BAAYX,KAAKY;YACbX,sBACAC,KAAKC,YAAYH,KACjBE,KAAKW,QAAQD;;;;;;;;;eAEjBE,mBAAIF;YACA,OAAOV,KAAKW;uCAEhBT;YACI,OAAOF,KAAKC;;MAVYE,oBAiB1BU;QACF,0BAAYf;YACRC,sBACAC,KAAKC,YAAYH;;;8FAErBI;YACI,OAAOF,KAAKC;;MANWE,oBAazBW,iBAAiB;QACtBC,eAAevB,SAASuB;QACxBC,WAAWxB,SAASwB;QACpBX,QAAQb,SAASa;QACjBF,WAAWX,SAASW;QACpBc,MAAMzB,SAASyB;QACfC,OAAO1B,SAAS0B;QAChBV,UAAUhB,SAASgB;QACnBW,cAAc3B,SAAS2B;;IAkCxBC,IAAIC,WAAU,GAKRC,WAAW;QAChBC,WAAW;YACVC,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASC;oBACfA,EAAEC,gBAAgBD,EAAEC,cAAc3B,eAElC0B,EAAEE,SAASF,EAAEE,OAAO5B;oBACpB6B,IAAMC,KAAKJ,EAAEK;oBACbL,EAAEM,OAAOF,GAAGG,OAAOC,GACnBR,EAAES,OAAOL,GAAGG,OAAOG,GAEnBjB,WAAU,GAEVM,GAAGC;;;;QAuBNW,UAAU;YACTf,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASC;oBACfA,EAAEC,gBAAgBD,EAAEC,cAAc3B,eAElC0B,EAAEE,SAASF,EAAEE,OAAO5B;oBACpB6B,IAAMC,KAAKJ,EAAEK;oBACbL,EAAEM,OAAOF,GAAGG,OAAOC,GACnBR,EAAES,OAAOL,GAAGG,OAAOG,GAEnBjB,WAAU,GAEVM,GAAGC;;;;QAINY,SAAS;YACRhB,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASC;oBACfA,EAAEC,gBAAgBD,EAAEC,cAAc3B,eAElC0B,EAAEE,SAASF,EAAEC,cAAc3B;oBAC3B6B,IAAMC,KAAKJ,EAAEK;oBACbL,EAAEM,OAAOF,GAAGG,OAAOC,GACnBR,EAAES,OAAOL,GAAGG,OAAOG,GAEnBjB,WAAU,GAEVM,GAAGC;;;;QAINa,WAAU;YACTjB,OAAO,EAAC;YACRC,SAAU,SAASC,MAAMC;gBACxB,OAAO,SAASC;oBACf,IAAKP,SAAL;wBAIAO,EAAEC,gBAAgBH,MAElBE,EAAEE,SAASF,EAAEE,UAAUF,EAAEE,OAAO5B;wBAChC6B,IAAMC,KAAKJ,EAAEK;wBACbL,EAAEM,OAAOF,GAAGG,OAAOC,GACnBR,EAAES,OAAOL,GAAGG,OAAOG,GAEnBX,GAAGC;;;;;QAINc,SAAS;YACRlB,OAAO,EAAC,aAAa;YACrBC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASC;oBACf,IAAKP,SAAL;wBAIAO,EAAEC,gBAAgBH,MAElBL,WAAU,GAEVO,EAAEE,SAASF,EAAEE,UAAUF,EAAEE,OAAO5B;wBAChC6B,IAAMC,KAAKJ,EAAEK;wBACbL,EAAEM,OAAOF,GAAGG,OAAOC,GACnBR,EAAES,OAAOL,GAAGG,OAAOG,GAEnBX,GAAGC;;;;;OASDe,aAAaC,KAAKC,KAAK,KAevBC,qBAAqB;QAC1BV,GAAG;YACFW,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcZ;;YAG3Ba,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASf,IAAI/C,OACrBW,KAAKgD,cAAcZ,IAAI/C;;;QAGhCiD,GAAG;YACFS,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcV;;YAG3BW,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASb,IAAIjD,OACrBW,KAAKgD,cAAcV,IAAIjD;;;QAGhC+D,QAAQ;YACPL,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcI;;YAG3BH,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASE,MAAMjB,IAAI/C,OAC3BW,KAAKgD,cAAcI,SAAS/D;;;QAGrCiE,QAAQ;YACPP,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcM;;YAG3BL,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASE,MAAMf,IAAIjD,OAC3BW,KAAKgD,cAAcM,SAASjE;;;QAGrCkE,OAAO;YACNR,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcO;;YAG3BN,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASK,KAAKpB,KAAK/C,QAAQsD,YACnC3C,KAAKgD,cAAcO,QAAQlE;;;QAGpCoE,OAAO;YACNV,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcS;;YAG3BR,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASK,KAAKlB,IAAIjD,QAAQsD,YAClC3C,KAAKgD,cAAcS,QAAQpE;;;QAIpCqE,MAAM;YACLX,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcU;;YAG3BT,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUS,OAAOvB,IAAI/C,OACnBW,KAAKgD,cAAcU,OAAOrE;;;QAGnCuE,MAAM;YACLb,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcY;;YAG3BX,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUS,OAAOrB,IAAIjD,OACnBW,KAAKgD,cAAcY,OAAOvE;;;QAGnCwE,UAAU;YACTd,KAAK;gBACJ,OAAO/C,KAAKgD,cAAca;;YAG3BZ,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASU,WAAWxE,QAAQsD,YACpC3C,KAAKgD,cAAca,WAAWxE;;;QAGvCyE,SAAS;YACRf,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcc;;YAG3Bb,KAAK,SAAS5D;gBAGb,OAFAA,UAAUA,OACVW,KAAKkD,UAAUC,SAASW,UAAUzE,OAC3BW,KAAKgD,cAAcc,UAAUzE;;;QAGtC0E,OAAO;YACNhB,KAAK;gBACJ,OAAO/C,KAAKgD,cAAce;;YAG3Bd,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASY,QAAQ1E,OACzBW,KAAKgD,cAAce,QAAQ1E;;;QAGpC2E,MAAM;YACLjB,KAAK;gBACJ,OAAO/C,KAAKgD,cAAcgB;;YAG3Bf,KAAK,SAAS5D;gBAEb,OADAW,KAAKkD,UAAUC,SAASc,cAAc5E,OAC/BW,KAAKgD,cAAcgB,OAAO3E;;;QAcnC6E,kBAAkB;YACjB7E,OAAO,SAAS8E,MAAMxC;gBACrB,IAAMA,cAAcyC,UAApB;oBAIA,IAAID,QAAQ7C,UAAU;wBAOrB,KANAS,IAAMC,KAAKV,SAAS6C,OAEdE,OAAOrC,GAAGP,QAAQzB,MAAM2B,KAExBH,QAAQQ,GAAGR,OAER8C,IAAI,GAAGA,IAAI9C,MAAM+C,QAAQD,KAAK;4BACtCvC,IAAMyC,IAAIhD,MAAM8C;4BAEhBtE,KAAKkD,UAAUuB,OAAOD,KAAKxE,KAAKkD,UAAUuB,OAAOD,MAAM,IACvDxE,KAAKkD,UAAUuB,OAAOD,GAAGE,KAAK;gCAAEL,MAAMA;gCAAMM,QAAQhD;gCAEpD3B,KAAKkD,UAAUC,SAASyB,GAAGJ,GAAGH;;wBAG/BrE,KAAKkD,UAAUC,SAAS0B,eAAc;;oBAGvC,OAAO/D,eAAeC,cAAc+D,UAAUZ,iBAAiBa,MAAM/E,MAAMgF;;;;QAG7EC,qBAAqB;YACpB5F,OAAO,SAAS8E,MAAMxC;gBACrB,IAAIwC,QAAQ7C;oBAKX,KAJAS,IAAMC,KAAKV,SAAS6C,OAEd3C,QAAQQ,GAAGR,OAER8C,IAAI,GAAGA,IAAI9C,MAAM+C,QAAQD,KAAK;wBACtCvC,IAAMyC,IAAIhD,MAAM8C,IAEVY,OAAOlF,KAAKkD,UAAUuB,OAAOD;wBAEnC,IAAIU,MAAM;4BACT,KAAK,IAAIC,IAAID,KAAKX,SAAS,GAAGY,KAAK,GAAGA;gCACrC,IAAID,KAAKC,GAAGR,WAAWhD,IAAI;oCAC1B3B,KAAKkD,UAAUC,SAASiC,IAAIZ,GAAGU,KAAKC,GAAGd,OAEvCa,KAAKG,OAAOF,GAAG;oCACf;;;4BAIkB,MAAhBD,KAAKX,iBACDvE,KAAKkD,UAAUuB,OAAOD;;;;gBAMjCzC,IAAMuD,MAAMxE,eAAeC,cAAc+D,UAAUG,oBAAoBF,MAAM/E,MAAMgF,YAE7EO,YAAYvF,KAAKwF;gBACvB,KAAKD;oBACJ,OAAOD;;gBAGR,KAAKlE,IAAIkD,OAAKhD;oBACb,IAAKiE,UAAUjB,QAIXiB,UAAUjB,KAAGC,SAAS;wBACzB;;;gBAIF,OAAOe;;;QAGTG,yBAAyB;YACxBpG,OAAO,SAAS8E;gBAKf,OAJAnE,KAAKkD,UAAUC,SAASuC,mBAAmBvB,OAC3CnE,KAAK2F,MAAMxC,SAAS0B,eAAc;gBAClC7E,KAAKkD,UAAUuB,SAAS,IAEjB3D,eAAeC,cAAc+D,UAAUW,wBAAwBV,MAAM/E,MAAMgF;;;QAGpFY,MAAM;YACL7C,KAAK;gBACJ,OAAO/C,KAAKgD,cAAc4C;;YAG3B3C,KAAK,SAAS5D;gBAYb,OAXIA,SACHA,MAAM6D,UAAU2C,OAAOnB,KAAK1E,KAAKkD,UAAUC,WAC3CnD,KAAKkD,UAAUC,SAASyC,OAAOvG,MAAM6D,UAAUC;gBAE/CnD,KAAKkD,UAAUC,SAAS2C,KAAK,UAAS;oBACrC9F,KAAK+F,OAAOC,SAAS3G,MAAM6D,UAAUC;uBAGtCnD,KAAKkD,UAAUC,SAASyC,OAAO,MAGzB5F,KAAKgD,cAAc4C,OAAOvG;;;QAGnC4G,SAAS;YACRlD,KAAK;gBACJ,OAAO/C,KAAKgD,cAAciD;;YAG3BhD,KAAK,SAAS5D;gBACb,IAAIW,KAAKkD,UAAUgD;oBAClB,IAAI7G,OAAO;wBAGV,KAFA0C,IAAMmD,OAAO,IAEJZ,IAAI,GAAGA,IAAIjF,MAAMkF,QAAQD,KAAK;4BACtCvC,IAAMoE,IAAI9G,MAAMiF;4BAEhB,MAAI6B,aAAa3G,SAAS4G,oBAA1B;gCAIArE,IAAMsE,IAAI,IAAIJ,gBAAQG;gCACtBC,EAAEC,SAAS,EACVH,EAAEI,eAAe,GAAG,GAAG,GAAGJ,EAAEK,YAAY,KACxC,GAAGL,EAAEM,iBAAiB,GAAG,GAAGN,EAAEO,cAAc,KAC5C,GAAG,GAAGP,EAAEQ,gBAAgB,GAAGR,EAAES,aAAa,KAC1C,GAAG,GAAG,GAAGT,EAAEU,iBAAiBV,EAAEW,cAAc,KAC5C,GAAG,GAAG,GAAG,GAAG;gCAEb5B,KAAKR,KAAK2B;;;wBAQX,KALA,IAAIU,IAAI/G,KAAKkD,UAAUC,UACnB6D,IAAID,EAAEE,UACNC,IAAI,IAAI/G,mBACRgH,KAAKnH,KAAKkD,UAAUgD,cAAcgB,EAAElB,SAAS,IAAI7F,oBAE9C6G,EAAEzC;4BACR4C,GAAGnB,SAASgB,EAAE;;wBAGfD,EAAEf,SAASkB,IACXH,EAAEK,mBAAmBD,IAErBA,GAAGE,mBACHF,GAAGG;wBAEHvF,IAAMwF,IAAIJ,GAAGK,kBACPpF,IAAImF,EAAEnF,GACNE,IAAIiF,EAAEjF;wBAEZ,KAASgC,IAAI,GAAGA,IAAI6C,GAAGF,SAAS1C,QAAQD;4BACvC6C,GAAGF,SAAS3C,GAAGlC,KAAKA,GACpB+E,GAAGF,SAAS3C,GAAGhC,KAAKA,GAEhB6E,GAAGF,SAAS3C,GAAG8C,qBAClBD,GAAGF,SAAS3C,GAAG8C,iBAAiBK,iBAAgB;;wBAGlDP,EAAE9E,IAAIA,GACN8E,EAAE5E,IAAIA,GAEN6E,GAAGlB,UAAUf,MACbiC,GAAGM,iBAAgB;2BACb;wBACN1F,IAAMgF,MAAI/G,KAAKkD,UAAUC;wBAEzB,IAAI4D,IAAEK,kBAAkB;4BACvBrF,IAAMoF,OAAKnH,KAAKkD,UAAUgD,aACpBgB,MAAIC,KAAGpB,QACPiB,MAAIG,KAAGF;4BAIb,KAFAF,IAAEW,kBACFX,IAAEK,mBAAmB,MACdJ,IAAEzC,UAAQ;gCAChBxC,IAAM4F,IAAIZ,IAAEf,SAASgB,IAAE;gCACvBW,EAAEvF,KAAK8E,IAAE9E,GACTuF,EAAErF,KAAK4E,IAAE5E;;4BAGV6E,KAAGlB,UAAU,MACbkB,KAAGM,iBAAgB,GAEnBzH,KAAKkD,UAAUgD,cAAca;;;;gBAKhC,OAAO/G,KAAKgD,cAAciD,UAAU5G;;;QAGtCuI,SAAS;YACRvI,OAAO;gBACN,OAAOW,KAAKkD,UAAUC;;;;IAQzB,SAAS0E,UAAU9B,QAAQ+B;sDAAgB;QAC1C,IAAMC;;;;;uEACLC,6BAAkBC;iBAvfpB,SAA0BvG,MAAMuG;oBAC/BvG,KAAKsB,gBAAgB;wBACpBZ,GAAG;wBACHE,GAAG;wBACHc,QAAQ;wBACRE,QAAQ;wBACR4E,MAAM;wBACNC,MAAM;wBACN5E,OAAO;wBACPE,OAAO;wBACPI,UAAU;wBACVC,UAAS;wBACTC,OAAO;wBACPC,OAAM;wBACN4B,MAAM;wBACNK,SAAS;uBAGVvE,KAAKwB,YAAY;wBAChBC,UAAU8E;wBACVtE,QAAQsE,KAAKG,UAAUH,KAAKI;wBAC5B5D,QAAQ;;iBAmeP6D,CAAiBtI,MAAMiI;;UAFHlC;QAUtB,OAJK+B,iBACJ7I,OAAOC,iBAAiB6I,QAAQjD,WAAWhC;QAGrCiF;;IAGRvI,SAASwB;QACR;YACChB,KAAKgI,kBAAkB,IAAInI,cAAcG,QAEzCD,uBAASiF;;;yEAGVuD;YAIC,OAHAvI,KAAKgI,kBAAkB,IAAInI,cAAcG,QACzCA,KAAKkD,UAAUgD,cAAclG,KAAKkD,UAAUC;YAErCpD,qBAAMwI,uBAAcvD;+BAG5BgB,oBAASwC;YAGR,OAFAxI,KAAKkD,UAAUgD,YAAYF,SAASwC,MAAMtF,UAAUC,WAE7CpD,qBAAMiG,oBAASwC;+BAGvBC,sBAAWD,OAAOE;YAGjB,OAFA1I,KAAKkD,UAAUgD,YAAYuC,WAAWD,MAAMtF,UAAUC,UAAUuF,QAEzD3I,qBAAM0I,sBAAWD,OAAOE;+BAGhCC,uBAAYH;YAGX,OAFAxI,KAAKkD,UAAUgD,YAAYyC,YAAYH,MAAMtF,UAAUC,WAEhDpD,qBAAM4I,uBAAYH;+BAG1BI,yBAAcF;YAGb,OAFA1I,KAAKkD,UAAUgD,YAAY0C,cAAcF,QAElC3I,qBAAM6I,yBAAcF;+BAG5BG;YAGC,OAFA7I,KAAKkD,UAAUgD,YAAYwB,kBAEpB3H,qBAAM8I;;4CAIfrJ,SAASa;QACR;YACCL,KAAKgI,kBAAkB,IAAI5H,WAAWJ,QAEtCD,uBAASiF;;;gEAGVuD;YAGC,OAFAvI,KAAKgI,kBAAkB,IAAI5H,WAAWJ,QAE/BD,qBAAMwI,uBAAcvD;4BAG5B8D;YACC/I,qBAAM+I,wBAAe9D;YAErBjD,IAAMgH,QAAQ/I,KAAKgJ,YAAYC,SAASjJ,KAAKkJ,eACvCC,cAAcC,oBAAYC,KAAKN,MAAMO,QACrCC,UAAU,IAAIC,gBAAQL,aAAaJ,MAAMU;YAE/CzJ,KAAKkD,UAAUC,SAASoG,UAAUA;;yCAIpC/J,SAAS0B;QACR;YACClB,KAAKgI,kBAAkB,IAAI1H,UAAUN,QACrCA,KAAKkD,UAAU2C,SAAS,IAExB9F,uBAASiF;;;;;;;;;eAGV0E,qBAAIC;YACH,OAAO3J,KAAK4J;WAGbF,qBAAIC,wBAAStK;YACZ,IAAIW,KAAKkD,UAAU2C,OAAOtB;gBAGzB,IAFAvE,KAAKkD,UAAUC,SAASuE,kBAEpBrI;oBACH,KAAK+B,IAAIkD,IAAI,GAAGA,IAAItE,KAAKkD,UAAU2C,OAAOtB,QAAQD;wBACjDtE,KAAKkD,UAAU2C,OAAOvB,GAAGsB,OAAO5F,KAAKkD,UAAUC;;;oBAGhD,KAAK/B,IAAIkD,MAAI,GAAGA,MAAItE,KAAKkD,UAAU2C,OAAOtB,QAAQD;wBACjDtE,KAAKkD,UAAU2C,OAAOvB,KAAGsB,OAAO;;;;YASnC,OAJIvG,SACHW,KAAKkD,UAAUC,SAAS6C,SAAS3G,MAAM6D,UAAUC,WAG3CnD,KAAK4J,YAAYvK;;wCAI1BG,SAASgB;QACR;YACCR,KAAKgI,kBAAkB,IAAIzH,aAAaP,QAExCA,KAAKkD,UAAUC,SAAS0G,UAAU,UAAU;YAE5C7J,KAAKkD,UAAU4G,aAAa,GAC5B9J,KAAKkD,UAAU6G,cAAc,GAE7BhK,uBAASiF;;;sEAGVgF,kBAAO5H,GAAGE;YAST,OARItC,KAAKkD,UAAUC,SAAS8G,QAAQC,UAAUC,cAAc;gBAAC/H,GAAGA;gBAAGE,GAAGA;iBACrEtC,KAAKkD,UAAUC,SAASiH,cAExBpK,KAAKkD,UAAUC,SAASkH,WAGzBrK,KAAKkD,UAAUC,SAAS6G,OAAO5H,GAAGE;YAE3BvC,qBAAMiK,kBAAO5H,GAAGE;8BAGxBgI,kBAAOlI,GAAGE;YAGT,OAFAtC,KAAKkD,UAAUC,SAASmH,OAAOlI,GAAGE,IAE3BvC,qBAAMuK,kBAAOlI,GAAGE;8BAGxBiI,kBAAOC,IAAIC,IAAIC,IAAIC,IAAIC;YAGtB,OAFA5K,KAAKkD,UAAUC,SAAS0H,MAAML,IAAIC,IAAIC,IAAIC,IAAIC,SAEvC7K,qBAAM8K,iBAAML,IAAIC,IAAIC,IAAIC,IAAIC;8BAGpCE,eAAI1I,GAAGE,GAAGsI,QAAQG,YAAYC,UAAUC;YAGvC,OAFAjL,KAAKkD,UAAUC,SAAS2H,IAAI1I,GAAGE,GAAGsI,QAAQG,YAAYC,UAAUC;YAEzDlL,qBAAM+K,eAAI1I,GAAGE,GAAGsI,QAAQG,YAAYC,UAAUC;8BAGtDC,4BAAiBC,KAAKC,KAAKhJ,GAAGE;YAG7B,OAFAtC,KAAKkD,UAAUC,SAAS+H,iBAAiBC,KAAKC,KAAKhJ,GAAGE,IAE/CvC,qBAAMmL,4BAAiBC,KAAKC,KAAKhJ,GAAGE;8BAG5C+I,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMrJ,GAAGE;YAGxC,OAFAtC,KAAKkD,UAAUC,SAASkI,cAAcC,MAAMC,MAAMC,MAAMC,MAAMrJ,GAAGE,IAE1DvC,qBAAMsL,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMrJ,GAAGE;8BAGvDmH,gBAAKrH,GAAGE,GAAGoJ,GAAGC;YAGb,OAFA3L,KAAKkD,UAAUC,SAASyI,SAASxJ,GAAGE,GAAGoJ,GAAGC,IAEnC5L,qBAAM0J,gBAAKrH,GAAGE,GAAGoJ,GAAGC;8BAG5BE;YACC7L,KAAKkD,UAAUC,SAAS0I;YAET7L,KAAKkD,UAAUC,SAAS2I,YAAYC;YAEnD,OAAOhM,qBAAM8L;8BAGdG;YAGC,OAFAhM,KAAKkD,UAAUC,SAAS6I,SAEjBjM,qBAAMiM;8BAGdC,uBAAYC;YACXnK,IAAMuD,MAAM;gBACX4G,OAAO;gBACPnI,OAAO;;YAGR,OAAKmI,QAKmB,QAApBA,MAAMC,OAAO,MAChB7G,IAAI4G,QAAQE,SAASF,MAAMG,MAAM,IAAI;YAC9B/G,QAGR4G,QAAQA,MAAMI,QAAQ,kBAAkB,IAAIC,MAAM,MAElDjH,IAAI4G,QA7iBY,QA6iBJM,OAAON,MAAM,MAxiBP,MAwiByBM,OAAON,MAAM,MAAoBM,OAAON,MAAM;YACzF5G,IAAIvB,QAAQyI,OAAON,MAAM,KAElB5G,QAdNA,IAAIvB,QAAQ,GACLuB;8BAgBTuE,qBAAUqC;YACTnK,IAAMiF,IAAIhH,KAAKiM,YAAYC;YAG3B,OAFAlM,KAAKkD,UAAUC,SAAS0G,UAAU7C,EAAEkF,OAAOlF,EAAEjD,QAEtChE,qBAAM8J,qBAAUqC;8BAGxBhC;YAGC,OAFAlK,KAAKkD,UAAUC,SAAS+G,WAEjBnK,qBAAMmK;8BAGduC,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;YAUnD,OATA9M,KAAKkD,UAAUC,SAAS4J,UAAU;gBACjCC,OAAON;gBACPR,OAAOlM,KAAKkD,UAAU4G;gBACtB/F,OAAO/D,KAAKkD,UAAU6G;gBACtBkD,KAAMN,QAAQO,UAAWA,QAAQP,QAAQA;gBACzCQ,MAAOP,UAAUQ,WAAYA,SAASR,UAAUA;gBAChDC,YAAYA;gBAGN9M,qBAAM0M,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;8BAGlEO,uBAAYnB;YACXnK,IAAMiF,IAAIhH,KAAKiM,YAAYC;YAI3B,OAHAlM,KAAKkD,UAAU4G,aAAa9C,EAAEkF,OAC9BlM,KAAKkD,UAAU6G,cAAc/C,EAAEjD;YAExBhE,qBAAMsN,uBAAYnB;8BAG1BoB,yBAAclL,GAAGE,GAAGoJ,GAAGC,GAAGf;YAGzB,OAFA5K,KAAKkD,UAAUC,SAASoK,gBAAgBnL,GAAGE,GAAGoJ,GAAGC,GAAGf,SAE7C7K,qBAAMuN,yBAAclL,GAAGE,GAAGoJ,GAAGC,GAAGf;8BAGxC4C,sBAAWpL,GAAGE,GAAGsI;YAGhB,OAFA5K,KAAKkD,UAAUC,SAASqK,WAAWpL,GAAGE,GAAGsI,SAElC7K,qBAAMyN,sBAAWpL,GAAGE,GAAGsI;8BAG/B6C,uBAAYrL,GAAGE,GAAGoJ,GAAGC;YAGpB,OAFA3L,KAAKkD,UAAUC,SAASsK,YAAYrL,GAAGE,GAAGoJ,GAAGC,IAEtC5L,qBAAM0N,uBAAYrL,GAAGE,GAAGoJ,GAAGC;8BAGnC+B,wBAAatL,GAAGE,GAAGsI,QAAQ+C,OAAOC,WAAWC;YAG5C,OAFA7N,KAAKkD,UAAUC,SAAS2K,mBAAmB1L,GAAGE,GAAGsI,QAAQ+C,OAAOE,QAAQlL;YAEjE5C,qBAAM2N,wBAAatL,GAAGE,GAAGsI,QAAQ+C,OAAOC,WAAWC;;;IAO5D9L,IAAMmL,UAAU;QACfa,GAAGC,kBAAUC;QACbC,GAAGF,kBAAUG;QACbC,GAAGJ,kBAAUK;OAMRjB,WAAW;QAChBW,GAAGC,kBAAUM;QACbJ,GAAGF,kBAAUG;QACbC,GAAGJ,kBAAUO;;IAGdtP,OAAOC,iBAAiBM,SAASgB,SAASsE,WAAW;QACpD0J,SAAS;YACRnP,OAAOG,SAASgB,SAASsE,UAAUoG;;QAGpCU,UAAU;YACTvM,OAAOG,SAASgB,SAASsE,UAAU2E;;QAGpCgF,IAAI;YACHpP,OAAOG,SAASgB,SAASsE,UAAUkF;;QAGpC0E,IAAI;YACHrP,OAAOG,SAASgB,SAASsE,UAAUwF;;QAGpCqE,IAAI;YACHtP,OAAOG,SAASgB,SAASsE,UAAU+F;;QAGpC+D,IAAI;YACHvP,OAAOG,SAASgB,SAASsE,UAAUuG;;QAGpCwD,IAAI;YACHxP,OAAOG,SAASgB,SAASsE,UAAUoG;;QAGpC4D,GAAG;YACFzP,OAAOG,SAASgB,SAASsE,UAAUgG;;QAGpCiE,GAAG;YACF1P,OAAOG,SAASgB,SAASsE,UAAU2E;;QAGpCuF,IAAI;YACH3P,OAAOG,SAASgB,SAASsE,UAAU+G;;QAGpC7E,GAAG;YACF3H,OAAOG,SAASgB,SAASsE,UAAUkH;;QAGpC7F,GAAG;YACF9G,OAAOG,SAASgB,SAASsE,UAAU+E;;QAGpCoF,IAAI;YACH5P,OAAOG,SAASgB,SAASsE,UAAUoF;;QAGpCgF,IAAI;YACH7P,OAAOG,SAASgB,SAASsE,UAAU2H;;QAGpC0C,GAAG;YACF9P,OAAOG,SAASgB,SAASsE,UAAUuI;;QAGpC+B,IAAI;YACH/P,OAAOG,SAASgB,SAASsE,UAAU8G;;QAGpCyD,IAAI;YACHhQ,OAAOG,SAASgB,SAASsE,UAAUwI;;QAGpCgC,IAAI;YACHjQ,OAAOG,SAASgB,SAASsE,UAAU0I;;QAGpC+B,IAAI;YACHlQ,OAAOG,SAASgB,SAASsE,UAAU2I;;QAGpC+B,IAAI;YACHnQ,OAAOG,SAASgB,SAASsE,UAAU4I;;QAIrClO,SAASyB;QACR,gBAAYP,MAAM+O,MAAMvD;YACvBnK,IAAM2N,QAAQ1P,KAAK2P,WAAWF,OACxBjL,IAAI,IAAIvD,aAAKP,MAAM;gBACxBkP,UAAUF,MAAME;gBAChBC,YAAYH,MAAMG;gBAClBC,MAAM9P,KAAKiM,YAAYC;gBACvB6D,WAAU;;YAGX/P,KAAKgI,kBAAkB,IAAIvH,kBAAkBT,MAAMwE,KACnDxE,KAAKkD,UAAUC,SAAS6C,SAASxB;YAEjCxE,KAAKgD,gBAAgB/D,OAAO+Q,OAAOhQ,KAAKgD,eAAe;gBACtDtC,MAAMA;gBACN+O,MAAMA;gBACNvD,OAAOA;gBACP+D,WAAW;gBACXC,YAAY;gBACZC,WAAW;gBAGZpQ,uBAASiF;;;;;;;;;;;;;;;;;;;;;;;;eAGVoL,qBAAI1P;YACH,OAAOV,KAAKgD,cAActC;WAG3B0P,qBAAI1P,oBAAKA;YAIR,OAHAV,KAAKkD,UAAUC,SAASzC,KAAKA,OAAOA,MACpCV,KAAKqQ,OAAOrQ,KAAKiQ,YAEVjQ,KAAKgD,cAActC,OAAOA;4BAGlCiP,sBAAWF;YACV1N,IAAMuO,IAAIb,KAAKlD,MAAM;YAErB,OAAO;gBACNqD,UAAUpD,OAAO8D,EAAEC,QAAQjE,QAAQ,MAAM;gBACzCuD,YAAYS,EAAEnD,KAAK,KAAKb,QAAQ,MAAM;;WAIxC8D,qBAAIX;YACH,OAAOzP,KAAKgD,cAAcyM;WAG3BW,qBAAIX,oBAAKA;YACR1N,IAAM2N,QAAQ1P,KAAK2P,WAAWF;YAI9B,OAHAzP,KAAKkD,UAAUC,SAASzC,KAAK8P,MAAMZ,WAAWF,MAAME,UACpD5P,KAAKkD,UAAUC,SAASzC,KAAK8P,MAAMX,aAAaH,MAAMG;YAE/C7P,KAAKgD,cAAcyM,OAAOA;4BAGlCxD,uBAAYC;YACX,OAAOE,SAASF,MAAMG,MAAM,IAAI;WAGjC+D,qBAAIlE;YACH,OAAOlM,KAAKgD,cAAckJ;WAE3BkE,qBAAIlE,qBAAMA;YAGT,OAFAlM,KAAKkD,UAAUC,SAASzC,KAAK8P,MAAMV,OAAO9P,KAAKiM,YAAYC,QAEpDlM,KAAKgD,cAAckJ,QAAQA;4BAGnCmE,kBAAOI;YACQ,WAAVA,QAKU,aAAVA,QAKU,YAAVA,UACHzQ,KAAKkD,UAAUC,SAASzC,KAAK0B,KAAMpC,KAAKmQ,aALxCnQ,KAAKkD,UAAUC,SAASzC,KAAK0B,KAAKpC,KAAKmQ,YAAY,IALnDnQ,KAAKkD,UAAUC,SAASzC,KAAK0B,IAAI;WAenCgO,qBAAIH;YACH,OAAOjQ,KAAKgD,cAAciN;WAG3BG,qBAAIH,yBAAUQ;YAIb,OAHAzQ,KAAKkD,UAAUC,SAASzC,KAAK8P,MAAMC,QAAQA,OAC3CzQ,KAAKqQ,OAAOI,QAELzQ,KAAKgD,cAAciN,YAAYQ;WAGvCL,qBAAIF;YACH,OAAOlQ,KAAKgD,cAAckN;WAG3BE,qBAAIF,0BAAWQ;YAGd,OAFA1Q,KAAKkD,UAAUC,SAASzC,KAAKwP,aAAaQ,QAEnC1Q,KAAKgD,cAAckN,aAAaQ;WAGxCN,qBAAID;YACH,OAAOnQ,KAAKgD,cAAcmN;WAG3BC,qBAAID,yBAAUnD;YAGb,OAFAhN,KAAKkD,UAAUC,SAASzC,KAAKiQ,gBAAgB3D,OAEtChN,KAAKgD,cAAcmN,YAAYnD;;uCAIxCxN,SAAS2B;QACR;YACCnB,KAAKgI,kBAAkB,IAAInH,iBAAiBb;YAE5C+B,IAAMvC,WAAWwF,UAAU,IACrBiD,OAAOzI,SAAS0D,UAAUC,UAE1ByN,YAAY5L,UAAU,IACtB6L,YAAY7L,UAAU,IACtB8L,YAAY9L,UAAU,IACtB+L,MAAM/L,UAAU,IAChBgM,WAAWhM,UAAU;YAE3B+L,IAAIjI,YAAYkI;YAChBjP,IAAMkP,UAAUhJ,KAAKjC,SAAS+K,IAAI7N,UAAUC;YAC5C8N,QAAQlN,QAAQ;YAEhB3C,IAAI8P,UAAS,GACTC,UAAS;YAEbF,QAAQrM,GAAG,gBAAe;gBACzBsM,UAAS,GACLC,SACH3R,SAASsJ,YAAYgI,aAErBtR,SAASsJ,YAAY+H;iBAIvBI,QAAQrM,GAAG,eAAc;gBACxBsM,UAAS,GAELC,SACH3R,SAASsJ,YAAY+H,aAErBrR,SAASsJ,YAAY8H;iBAIvBK,QAAQrM,GAAG,gBAAe;gBACzBuM,UAAS,GACT3R,SAASsJ,YAAYgI;iBAGtBG,QAAQrM,GAAG,cAAa;gBACvBuM,UAAS,GACLD,SACH1R,SAASsJ,YAAY+H,aAErBrR,SAASsJ,YAAY8H;iBAIvBK,QAAQrM,GAAG,qBAAoB;gBAC9BuM,UAAS,GACLD,SACH1R,SAASsJ,YAAY+H,aAErBrR,SAASsJ,YAAY8H;iBAIvBK,QAAQpM,eAAc,GACtBoM,QAAQG,SAAS,WAEjBrR,uBAASiF;;;;;QC1oCDqM,OCFIC,wBFqpCd,SAA6BhS,IAAIiS;QAC7BxP,IAAMyP,OAAOrS,OAAOsS,QAAQC,eAAepS;QAC3C,KAAKkS;YACD,MAAM,IAAIG,MAAM;;QAEpB5P,IAAM6P,MAAMJ,KAAKK;QACjB,OAAO,IAAIC,kBAASC,SAASC;YACc,MAAnCJ,IAAIK,WAAWC,SAAS3N,UACxBwN,QAAQ;YAEZhQ,IAAMoQ,SAAS,IAAIhT,OAAOK,SAAS4S,WAAU;YAQ7C,IAPAD,OAAOE,cAAclT,OAAOK,SAASC,QACrC0S,OAAOjO,iBAAiB,aAAY,SAAUoO;iBAiCtD,SAAwBA,KAAKd;oBACzBzP,IAAMwQ,SAASf,KAAKgB;oBAChBF,OAAyB,WAAjBA,IAAIG,KAAKtO,SACjBoO,OAAOD,IAAIG,KAAKnT,MAAMgT,IAAII;iBAnCtBC,CAAeL,KAAKd;iBAExBW,OAAOjO,iBAAiB,aAAY,SAAUoO;gBAC1CP,QAAQO;iBAERf,UAAU;gBACVA,YAAYA,WAAW,KAAKjF,QAAQ,eAAe;gBAEnD,KADAvK,IAAMsE,IAAIuL,IAAIK,WAAWC,UAChB5N,IAAI,GAAGA,IAAI+B,EAAE9B,QAAQD;oBAC1B+B,EAAE/B,GAAGsO,MAAMrB,WAAWlL,EAAE/B,GAAGsO;;;YAGnCT,OAAOU,aAAajB,IAAIK,WAAWC;YAElCY,eAAMR;YAIP,KAHAvQ,IAAMmN,KAAKsC,KAAKuB,kBACVC,QAAQV,IAAIxQ,QACZmR,aAAarB,IAAIqB,YACd3O,IAAI,GAAGA,IAAI2O,WAAW1O,QAAQD;gBACnC4K,GAAG+D,WAAW3O,GAAG4O,QAAQ,IAAI/T,OAAOK,SAAS2T,YAAY;oBACrDZ,QAAQ,EACJS,MAAMI,UAAUH,WAAW3O,GAAG4O;oBAElCG,QAAQJ,WAAW3O,GAAG+O;;;YAG9B,OAAOzB;;;KC1rCf,SAAUP;SACT,SAAiBiC;YAQhB,IAAaC;gBAaZ,gBAAYjU,IAAYkU,UAAkBjC,UAAkBkC,aAA0BC;6DAAJ,gDAA8C;oBAC/H3R,IAAMyP,OAAOrS,OAAOsS,QAAQC,eAAepS;oBAC3C,KAAKkS;wBACJ,MAAM,IAAIG,MAAM;;oBAGjB5P,IAAM6P,MAA4BJ,KAAKK,cACjC8B,OAAO/B,IAAI4B;oBACjB,KAAKG;wBACJ,MAAM,IAAIhC,MAAM;;oBAGjB5P,IAAM6R,OAAOhC,IAAIK;oBAEjBlS,sBAAMd,OAAO+Q,OAAOyD,aAAa;wBAChCzG,OAAO4G,KAAK5G;wBACZ0D,QAAQkD,KAAKlD;wBACbmD,iBAAiBzH,SAASwH,KAAK1H,MAAMG,MAAM,IAAI;wBAC5CqH,eAEJ1T,KAAK8T,MAAMxU,IACXU,KAAK+T,aAAaJ,MAClB3T,KAAKgU,YAAYzC;oBAEjBpS,OAAOK,SAASyU,OAAOC,YAAYN,KAAKO,KAExCnU,KAAKoU,cAAcpU,KAAKoU,YAAYC,KAAKrU;;;wEAM1CsU,wBAAaC;;oBACZ,wCADqC,KAC9BC,sBAAyBxU,KAAK8T,KAAK9T,KAAKgU,WAC7ClB,eAAMlB;wBACN7P,IAAM0S,aAAa,IAAIzU,OAAK+T;wBAE5B/T,OAAK0U,SAAS,IAAI9C,IAAI+C,gBC9CFC,OAAYL;4BACrC,qCADoD,KAChDA,QAAQM,oBAAoB;gCAC/B,SAASC;oCAER,KADA/S,IAAMmD,OAAOlF,KAAKiH,SAASoF,SAClB/H,IAAI,GAAEyQ,IAAI7P,KAAKX,QAAQD,IAAIyQ,GAAGzQ,KAAK;wCAC3CvC,IAAMyG,QAAQtD,KAAKZ;wCACdkE,MAAMwM,eACXxM,MAAMyM;;oCAGP,QAAO;;gCAORhW,OAAOC,iBAAiBC,OAAOK,SAASwB,UAAU8D,WAAW;oCAC5DmQ,MAAM;wCACL5V,OAAO;4CAEN,OADAW,KAAKkV,gBACElV,KAAKmV;;;oCAIdA,gBAAgB;wCACf9V,OAAOyV;;;gCAIT/S,IAAMqT,mBAAmB;oCACxBH,MAAM;wCACL5V,OAnBF;4CACC,QAAO;;;;gCAsBRJ,OAAOC,iBAAiBC,OAAOK,SAASa,OAAOyE,WAAWsQ,mBAC1DnW,OAAOC,iBAAiBC,OAAOK,SAASgB,SAASsE,WAAWsQ;gCAC5DnW,OAAOC,iBAAiBC,OAAOK,SAAS0B,MAAM4D,WAAWsQ,mBACzDnW,OAAOC,iBAAiBC,OAAOK,SAASyB,KAAK6D,WAAWsQ;gCACxDnW,OAAOC,iBAAiBC,OAAOK,SAAS6V,OAAOvQ,WAAWsQ,mBAE1DR,MAAMU,SAAS,SAASC;oCACnBvV,KAAKwV,gBAAgBxV,KAAKyV,KAAKF,QACnCvV,KAAK0V,cAAc,cACf1V,KAAK2V,aAAa3V,KAAKgM;oCAEvBhM,KAAK4V,iBACR5V,KAAK6V,WAAW7V,MAAMA,KAAK4V,iBACH,KAApB5V,KAAK8V,cAAsB9V,KAAK+V,WAAU/V,KAAK8V,aAAW,IAAG,MAChE9V,KAAKgW,cAAchW,KAAK8V,eAGzB9V,KAAKiV;oCAGNjV,KAAK0V,cAAc;mCAGpBd,MAAMK,OAAOH,uBAEbF,MAAMqB,kBAAkBrB,MAAMU;;gCAE9BV,MAAMqB,kBAAkBrB,MAAMa;;4BAG3Bb,MAAMR,cACTQ,MAAMsB,gBAAgB,SAAStU;gCAC9BgT,MAAMqB,mBACNrB,MAAMR;gCAGPQ,MAAMsB,gBAAgB,SAAStU;gCAC9BgT,MAAMqB;;yBD1BHE,CAAenW,OAAK0U,QAAQH,UAE5BtV,OAAOC,iBAAiBC,QAAQ;4BAC/BsV,YAAY;gCACXpV,OAAOoV;;4BAGRG,OAAO;gCACNvV,OAAOW,OAAK0U;;4BAIdvV,OAAOsS,QAAQ2E,kBAAkBxE,IAAIK,WAAW3S;wBAEhDyC,IAAMsU,UAAUC,eAAeC;wBAE/BF,QAAQG,gBAAgB;4BACvB7C;gCACC,cAAY8C;oCACX1W,uBAEAC,KAAKgG,SAASyQ,EAAEC,KAAK/C;;;;;;wBAKxB5R,IAAM4U,UAAU,IAAIN;wBASpB,OARAM,QAAQC,QAAQ;4BACfjD,MAAMc,WAAW7M;4BAGlB5H,OAAK6W,IAAIC,UAET9W,OAAK0U,OAAO1O,SAASyO,aAEdzU,OAAK+W,YAAYJ;;oCAI3BjX;oBAGC,OAFAP,OAAOK,SAASyU,OAAO/P,iBAAiB,QAAQlE,KAAKoU,cAE9CpU;oCAGRgX;oBAGC,OAFA7X,OAAOK,SAASyU,OAAOhP,oBAAoB,QAAQjF,KAAKoU,cAEjDpU;oCAGAoU;oBACPpU,KAAK0U,OAAOwB,iBACZlW,KAAK6W,IAAIC;;cAxGiBG;YAAf3D;SARd,CAAiBjC,kBAAAA;KADlB,CAAUA,UAAAA;QA+HIkC,SAASlC,MAAMiC,QAAQC;;"}