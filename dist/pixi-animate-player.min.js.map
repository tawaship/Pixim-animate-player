{"version":3,"file":"pixi-animate-player.min.js","sources":["../src/common/global.ts","../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/pixi/Player.ts","../src/common/core.ts"],"sourcesContent":["/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","/*!\n * @tawaship/pixi-animate-core.js - v1.0.3\n * \n * @require pixi.js v5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport { Container, Sprite, Graphics, BaseTexture, Texture, LINE_JOIN, Text, filters } from 'pixi.js';\n\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiMovieClip extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Sprite.html\r\n * @private\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiShape extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Graphics.html\r\n * @private\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiTextContainer extends Container {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n * @private\r\n */\r\nclass PixiButtonHelper extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    getCreatejs() {\r\n        return this._createjs;\r\n    }\r\n}\n\n/**\r\n * @ignore\r\n */\r\nconst createjsOrigin = {\r\n\tDisplayObject: createjs.DisplayObject,\r\n\tMovieClip: createjs.MovieClip,\r\n\tSprite: createjs.Sprite,\r\n\tContainer: createjs.Container,\r\n\tText: createjs.Text,\r\n\tShape: createjs.Shape,\r\n\tGraphics: createjs.Graphics,\r\n\tButtonHelper: createjs.ButtonHelper\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction overrideCreatejs(self, pixi) {\r\n\tself._originParams = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregx: 0,\r\n\t\tregy: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n\t\r\n\tself._pixiData = {\r\n\t\tinstance: pixi,\r\n\t\tregObj: pixi.anchor || pixi.pivot,\r\n\t\tevents: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget.getCreatejs();\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target.getCreatejs();\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = createjsOrigin.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t},\r\n\tgetPixi: {\r\n\t\tvalue: function() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction makeClass(parent, unuseAppendix = false) {\r\n\tclass CjsWrap extends parent {\r\n\t\t_overrideCreatejs(pixi) {\r\n\t\t\toverrideCreatejs(this, pixi);\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (!unuseAppendix) {\r\n\t\tObject.defineProperties(CjsWrap.prototype, appendixDescriptor);\r\n\t}\r\n\t\r\n\treturn CjsWrap;\r\n}\r\n\r\ncreatejs.MovieClip = class MovieClip extends makeClass(createjsOrigin.MovieClip) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiMovieClip(this));\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(new PixiMovieClip(this));\r\n\t\tthis._pixiData.subInstance = this._pixiData.instance;//.addChild(new PIXI.Container());\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\taddChild(child) {\r\n\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child, index) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n};\r\n\r\ncreatejs.Sprite = class Sprite extends makeClass(createjsOrigin.Sprite) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiSprite(this));\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(new PixiSprite(this));\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\tgotoAndStop() {\r\n\t\tsuper.gotoAndStop(...arguments);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n};\r\n\r\ncreatejs.Shape = class Shape extends makeClass(createjsOrigin.Shape) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiShape(this));\r\n\t\tthis._pixiData.masked = [];\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t}\r\n\t\t\r\n\t\treturn this._graphics = value;\r\n\t}\r\n};\r\n\r\ncreatejs.Graphics = class Graphics extends makeClass(createjsOrigin.Graphics) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiGraphics(this));\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\t\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tmoveTo(x, y) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x, y) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTon(x1, y1, x2, y2, radius) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx, cpy, x, y) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\tconst points = this._pixiData.instance.currentPath.points;\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tcolor = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(color[0]) * COLOR_RED + Number(color[1]) * COLOR_GREEN + Number(color[2]);\r\n\t\tres.alpha = Number(color[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._pixiData.instance.lineStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : caps,\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : joints,\r\n\t\t\tmiterLimit: miterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x, y, w, h, radius) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x, y, radius) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_JOIN.BUTT,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\nObject.defineProperties(createjs.Graphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: createjs.Graphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: createjs.Graphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: createjs.Graphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: createjs.Graphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: createjs.Graphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: createjs.Graphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: createjs.Graphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: createjs.Graphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: createjs.Graphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: createjs.Graphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: createjs.Graphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: createjs.Graphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: createjs.Graphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: createjs.Graphics.prototype.drawPolyStar\r\n\t}\r\n});\r\n\r\ncreatejs.Text = class Text$1 extends makeClass(createjsOrigin.Text) {\r\n\tconstructor(text, font, color) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tconst t = new Text(text, {\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._overrideCreatejs(new PixiTextContainer(this, t));\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tthis._originParams = Object.assign(this._originParams, {\r\n\t\t\ttext: text,\r\n\t\t\tfont: font,\r\n\t\t\tcolor: color,\r\n\t\t\ttextAlign: 'left',\r\n\t\t\tlineHeight: 0,\r\n\t\t\tlineWidth: 0\r\n\t\t});\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._originParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\treturn this._originParams.text = text;\r\n\t}\r\n\t\r\n\t_parseFont(font) {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontSize: Number(p.shift().replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._originParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\treturn this._originParams.font = font;\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._originParams.color;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\treturn this._originParams.color = color;\r\n\t}\r\n\t\r\n\t_align(align) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._originParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\treturn this._originParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._originParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.lineHeight = height;\r\n\t\t\r\n\t\treturn this._originParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._originParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.lineWidthWrap = width;\r\n\t\t\r\n\t\treturn this._originParams.lineWidth = width;\r\n\t}\r\n};\r\n\r\ncreatejs.ButtonHelper = class ButtonHelper extends makeClass(createjsOrigin.ButtonHelper, true) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(new PixiButtonHelper(this));\r\n\t\t\r\n\t\tconst createjs = arguments[0];\r\n\t\tconst pixi = createjs._pixiData.instance;\r\n\t\t\r\n\t\tconst baseFrame = arguments[1];\r\n\t\tconst overFrame = arguments[2];\r\n\t\tconst downFrame = arguments[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = arguments[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n};\n\n/**\r\n * Prepare createjs content published with Adobe Animate.\r\n * @param id \"lib.properties.id\" in Animate content.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction prepareAnimateAsync(id, basepath) {\r\n    const comp = window.AdobeAn.getComposition(id);\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        const loader = new window.createjs.LoadQueue(false);\r\n        loader.installPlugin(window.createjs.Sound);\r\n        loader.addEventListener('fileload', function (evt) {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', function (evt) {\r\n            resolve(evt);\r\n        });\r\n        if (basepath) {\r\n            basepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n            const m = lib.properties.manifest;\r\n            for (let i = 0; i < m.length; i++) {\r\n                m[i].src = basepath + m[i].src;\r\n            }\r\n        }\r\n        loader.loadManifest(lib.properties.manifest);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { prepareAnimateAsync };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import * as Core from '../common/core';\r\nimport * as _PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace PIXI {\r\n\texport namespace animate {\r\n\t\texport type TPlayerOption = {\r\n\t\t\tuseSynchedTimeline?: boolean\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player {\r\n\t\t\tprivate _app: _PIXI.Application;\r\n\t\t\tprivate _id: string;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @param id \"lib.properties.id\" in Animate content.\r\n\t\t\t * @param rootName Root class name of Animate content.\r\n\t\t\t * @param basepath Directory path of Animate content.\r\n\t\t\t * @param pixiOptions Options of PIXI.Application.\r\n\t\t\t */\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib: Core.TAnimateLibrary = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tthis._app = new _PIXI.Application(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}));\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.appendChild(this._app.view);\r\n\t\t\t\tthis._app.stop();\r\n\t\t\t\t\r\n\t\t\t\tthis._id = id;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleTick.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Prepare createjs content published with Adobe Animate.\r\n\t\t\t */\r\n\t\t\tprepareAsync(options: TPlayerOption = {}) {\r\n\t\t\t\treturn Core.prepareAnimateAsync(this._id, this._basepath)\r\n\t\t\t\t\t.then((lib: Core.TAnimateLibrary) => {\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tCore.initStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.render();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.stage.addChild(exportRoot.getPixi());\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\twindow.createjs.Ticker.removeEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleTick() {\r\n\t\t\t\tthis._stage._tickFunction();\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tget app(): _PIXI.Application {\r\n\t\t\t\treturn this._app;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TPlayerOption = PIXI.animate.TPlayerOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = PIXI.animate.Player;","import * as PIXI from 'pixi.js';\r\nimport * as Core from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import prepareAnimateAsync = Core.prepareAnimateAsync;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TAnimateLibrary = Core.TAnimateLibrary;\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage: any, options: any = {}) {\r\n\tif (options.useSynchedTimeline) {\r\n\t\tfunction containerDrawFunction() {\r\n\t\t\tconst list = this.children.slice();\r\n\t\t\tfor (let i = 0,l = list.length; i < l; i++) {\r\n\t\t\t\tconst child = list[i];\r\n\t\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\tchild.draw();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tfunction imageDrawFunction() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tObject.defineProperties(window.createjs.MovieClip.prototype, {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: function() {\r\n\t\t\t\t\tthis._updateState();\r\n\t\t\t\t\treturn this._containerDraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_containerDraw: {\r\n\t\t\t\tvalue: containerDrawFunction\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst imageDescriptors = {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: imageDrawFunction\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tObject.defineProperties(window.createjs.Sprite.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Graphics.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Shape.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Text.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(window.createjs.Bitmap.prototype, imageDescriptors);\r\n\t\t\r\n\t\tstage.update = function(props) {\r\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tthis.dispatchEvent(\"drawstart\");\n\t\t\tif (this.autoClear) { this.clear(); }\n\t\t\t\n\t\t\tif (this._webGLContext) {\n\t\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.draw();\n\t\t\t}\r\n\t\t\t\n\t\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t}\r\n\t\t\r\n\t\tstage.draw = containerDrawFunction;\r\n\t\t\r\n\t\tstage._updateFunction = stage.update;\r\n\t} else {\r\n\t\tstage._updateFunction = stage.tick;\r\n\t}\r\n\t\r\n\tif (stage._handleTick) {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t\tstage._handleTick();\r\n\t\t};\r\n\t} else {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t};\r\n\t}\r\n}"],"names":["Object","defineProperties","window","playSound","value","id","loop","createjs","Sound","play","interrupt","INTERRUPT_EARLY","PixiMovieClip","cjs","super","this","_createjs","getCreatejs","Container","PixiSprite","Sprite","PixiShape","PixiGraphics","Graphics","PixiTextContainer","text","_text","prototypeAccessors","PixiButtonHelper","createjsOrigin","DisplayObject","MovieClip","Text","Shape","ButtonHelper","let","_isDown","EventMap","mousedown","types","factory","self","cb","e","currentTarget","target","const","ev","data","rawX","global","x","rawY","y","rollover","rollout","pressmove","pressup","DEG_TO_RAD","Math","PI","appendixDescriptor","get","_originParams","set","_pixiData","instance","scaleX","scale","scaleY","skewX","skew","skewY","regX","regObj","regY","rotation","visible","alpha","_off","renderable","addEventListener","type","Function","func","i","length","t","events","push","origin","on","interactive","prototype","apply","arguments","removeEventListener","list","j","off","splice","res","listeners","_listeners","removeAllEventListeners","removeAllListeners","_pixi","mask","masked","once","parent","addChild","filters","subInstance","f","ColorMatrixFilter","m","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","children","n","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","getPixi","makeClass","unuseAppendix","CjsWrap","_overrideCreatejs","pixi","regx","regy","anchor","pivot","overrideCreatejs","initialize","child","addChildAt","index","removeChild","removeChildAt","removeAllChldren","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","prototypeAccessors$1","graphics","_graphics","beginFill","strokeFill","strokeAlpha","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTon","x1","y1","x2","y2","radius","arcTo","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","currentPath","points","clear","_parseColor","color","charAt","parseInt","slice","replace","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineStyle","width","cap","LineCap","join","LineJoin","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","0","LINE_JOIN","BUTT","1","ROUND","2","SQUARE","MITER","BEVEL","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","ss","s","dr","rr","dc","de","dp","font","_font","_parseFont","fontSize","fontFamily","fill","wordWrap","assign","textAlign","lineHeight","lineWidth","prototypeAccessors$2","_align","p","shift","style","align","height","lineWidthWrap","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","PIXI","prepareAnimateAsync","basepath","comp","AdobeAn","getComposition","Error","lib","getLibrary","Promise","resolve","reject","properties","manifest","loader","LoadQueue","installPlugin","evt","images","getImages","item","result","handleFileLoad","src","loadManifest","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","animate","Player","rootName","pixiOptions","root","prop","_app","_PIXI.Application","backgroundColor","document","body","appendChild","view","stop","_id","_rootClass","_basepath","Ticker","framerate","fps","_handleTick","bind","prepareAsync","options","Core.prepareAnimateAsync","exportRoot","_stage","Stage","stage","useSynchedTimeline","containerDrawFunction","l","isVisible","draw","_updateState","_containerDraw","imageDescriptors","Bitmap","update","props","tickOnUpdate","tick","dispatchEvent","autoClear","_webGLContext","_batchDraw","_autoPurge","_drawID","purgeTextures","_updateFunction","_tickFunction","Core.initStage","compositionLoaded","render","app"],"mappings":"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"}