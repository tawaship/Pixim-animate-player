{"version":3,"file":"pixi-createjs-player.js","sources":["../src/common/core.js","../src/common/global.ts","../src/pixi/Player.ts"],"sourcesContent":["import * as PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initAsync(id, basepath) {\r\n\tconst comp = window.AdobeAn.getComposition(id);\r\n\tif (!comp) {\r\n\t\tthrow new Error('no composition');\r\n\t}\r\n\t\r\n\tconst lib = comp.getLibrary();\r\n\t\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\tresolve({});\r\n\t\t}\r\n\t\t\n\t\tconst loader = new createjs.LoadQueue(false);\r\n\t\t\r\n\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\n\t\tloader.addEventListener('fileload', function(evt) {\r\n\t\t\thandleFileLoad(evt, comp);\r\n\t\t});\r\n\t\t\n\t\tloader.addEventListener('complete', function(evt) {\r\n\t\t\tresolve(evt);\r\n\t\t});\r\n\t\t\r\n\t\tif (basepath) {\r\n\t\t\tbasepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n\t\t\tconst m = lib.properties.manifest;\r\n\t\t\tfor (let i = 0; i < m.length; i++) {\r\n\t\t\t\tm[i].src = basepath + m[i].src;\r\n\t\t\t}\n\t\t}\r\n\t\t\r\n\t\tloader.loadManifest(lib.properties.manifest);\r\n\t})\r\n\t.then(evt => {\r\n\t\tconst ss = comp.getSpriteSheet();\n\t\tconst queue = evt.target;\n\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\n\t\tfor (let i = 0; i < ssMetadata.length; i++) {\n\t\t\tss[ssMetadata[i].name] = new window.createjs.SpriteSheet({\r\n\t\t\t\timages: [\r\n\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t],\r\n\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t});\n\t\t}\r\n\t\t\r\n\t\treturn lib;\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport function initStage(stage, options) {\r\n\toptions = options || {};\r\n\t\r\n\tif (options.useSynchedTimeline) {\r\n\t\tfunction containerDrawFunction() {\r\n\t\t\tconst list = this.children.slice();\r\n\t\t\tfor (let i = 0,l = list.length; i < l; i++) {\r\n\t\t\t\tconst child = list[i];\r\n\t\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\tchild.draw();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tfunction imageDrawFunction() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tObject.defineProperties(createjs.MovieClip.prototype, {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: function() {\r\n\t\t\t\t\tthis._updateState();\r\n\t\t\t\t\treturn this._containerDraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_containerDraw: {\r\n\t\t\t\tvalue: containerDrawFunction\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst imageDescriptors = {\r\n\t\t\tdraw: {\r\n\t\t\t\tvalue: imageDrawFunction\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tObject.defineProperties(createjs.Sprite.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Graphics.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Shape.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Text.prototype, imageDescriptors);\r\n\t\tObject.defineProperties(createjs.Bitmap.prototype, imageDescriptors);\r\n\t\t\r\n\t\tstage.update = function(props) {\r\n\t\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\t\tthis.dispatchEvent(\"drawstart\");\n\t\t\tif (this.autoClear) { this.clear(); }\n\t\t\t\n\t\t\tif (this._webGLContext) {\n\t\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.draw();\n\t\t\t}\r\n\t\t\t\n\t\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t}\r\n\t\t\r\n\t\tstage.draw = containerDrawFunction;\r\n\t\t\r\n\t\tstage._updateFunction = stage.update;\r\n\t} else {\r\n\t\tstage._updateFunction = stage.tick;\r\n\t}\r\n\t\r\n\tif (stage._handleTick) {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t\tstage._handleTick();\r\n\t\t};\r\n\t} else {\r\n\t\tstage._tickFunction = function(e) {\r\n\t\t\tstage._updateFunction();\r\n\t\t};\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst createjsOrigin = {\r\n\tDisplayObject: createjs.DisplayObject,\r\n\tMovieClip: createjs.MovieClip,\r\n\tSprite: createjs.Sprite,\r\n\tContainer: createjs.Container,\r\n\tText: createjs.Text,\r\n\tShape: createjs.Shape,\r\n\tGraphics: createjs.Graphics,\r\n\tButtonHelper: createjs.ButtonHelper\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction overrideCreatejs(self, pixi) {\r\n\tself._originParams = {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregx: 0,\r\n\t\tregy: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n\t\r\n\tpixi._createjs = self;\r\n\t\r\n\tself._pixiData = {\r\n\t\tinstance: pixi,\r\n\t\tregObj: pixi.anchor || pixi.pivot,\r\n\t\tevents: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _downInstance;\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst EventMap = {\r\n\tmousedown: {\r\n\t\ttypes: ['pointerdown'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tmouseup: {\r\n\t\ttypes: ['pointerup'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t*/\r\n\trollover: {\r\n\t\ttypes: ['pointerover'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\trollout: {\r\n\t\ttypes: ['pointerout'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\te.currentTarget = e.currentTarget._createjs;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.currentTarget._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = true;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressmove:{\r\n\t\ttypes: ['pointermove'],\r\n\t\tfactory:  function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpressup: {\r\n\t\ttypes: ['pointerup', 'pointeupoutside'],\r\n\t\tfactory: function(self, cb) {\r\n\t\t\treturn function(e) {\r\n\t\t\t\tif (!_isDown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\te.currentTarget = self;\r\n\t\t\t\t\r\n\t\t\t\t_isDown = false;\r\n\t\t\t\t\r\n\t\t\t\te.target = e.target && e.target._createjs;\r\n\t\t\t\tconst ev = e.data;\r\n\t\t\t\te.rawX = ev.global.x;\r\n\t\t\t\te.rawY = ev.global.y;\r\n\t\t\t\t\r\n\t\t\t\tcb(e);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst appendixDescriptor = {\r\n\tx: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.x;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\treturn this._originParams.x = value;\r\n\t\t}\r\n\t},\r\n\ty: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.y;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\treturn this._originParams.y = value;\r\n\t\t}\r\n\t},\r\n\tscaleX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\treturn this._originParams.scaleX = value;\r\n\t\t}\r\n\t},\r\n\tscaleY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.scaleY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\treturn this._originParams.scaleY = value;\r\n\t\t}\r\n\t},\r\n\tskewX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewX = value;\r\n\t\t}\r\n\t},\r\n\tskewY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.skewY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.skewY = value;\r\n\t\t}\r\n\t\r\n\t},\r\n\tregX: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regX;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\treturn this._originParams.regX = value;\r\n\t\t}\r\n\t},\r\n\tregY: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.regY;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\treturn this._originParams.regY = value;\r\n\t\t}\r\n\t},\r\n\trotation: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.rotation;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\treturn this._originParams.rotation = value;\r\n\t\t}\r\n\t},\r\n\tvisible: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.visible;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\treturn this._originParams.visible = value;\r\n\t\t}\r\n\t},\r\n\talpha: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.alpha;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\treturn this._originParams.alpha = value;\r\n\t\t}\r\n\t},\r\n\t_off: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams._off;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\treturn this._originParams._off = value;\r\n\t\t}\r\n\t},\r\n\t/*\r\n\tdispatchEvent: {\r\n\t\tvalue: function(eventObj, bubbles, cancelable) {\r\n\t\t\tvar type = eventObj typeof 'string' ? eventObj : eventObj.type;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.emit(type, eventObj);\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.dispatchEvent.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\t*/\r\n\taddEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (!(cb instanceof Function)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst func = ev.factory(this, cb);\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.events[t] = this._pixiData.events[t] || [];\r\n\t\t\t\t\tthis._pixiData.events[t].push({ func: func, origin: cb });\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._pixiData.instance.on(t, func);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.interactive = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.addEventListener.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tremoveEventListener: {\r\n\t\tvalue: function(type, cb) {\r\n\t\t\tif (type in EventMap) {\r\n\t\t\t\tconst ev = EventMap[type];\r\n\t\t\t\t\r\n\t\t\t\tconst types = ev.types;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\t\t\tconst t = types[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst list = this._pixiData.events[t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (list) {\r\n\t\t\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\t\t\tthis._pixiData.instance.off(t, list[j].func);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\t\t\tdelete(this._pixiData.events[t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst res = createjsOrigin.DisplayObject.prototype.removeEventListener.apply(this, arguments);\r\n\t\t\t\r\n\t\t\tconst listeners = this._listeners;\r\n\t\t\tif (!listeners) {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet f = false;\r\n\t\t\t\r\n\t\t\tfor (let i in EventMap) {\r\n\t\t\t\tif (!listeners[i]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (listeners[i].length > 0) {\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res;\r\n\t\t}\r\n\t},\r\n\tremoveAllEventListeners: {\r\n\t\tvalue: function(type) {\r\n\t\t\tthis._pixiData.instance.removeAllListeners(type);\r\n\t\t\tthis._pixi.instance.interactive = false;\r\n\t\t\tthis._pixiData.events = {};\r\n\t\t\t\r\n\t\t\treturn createjsOrigin.DisplayObject.prototype.removeAllEventListeners.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\tmask: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.mask;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue._pixiData.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value._pixiData.instance;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', function() {\r\n\t\t\t\t\tthis.parent.addChild(value._pixiData.instance);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.mask = value;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tget: function() {\r\n\t\t\treturn this._originParams.filters;\r\n\t\t},\r\n\t\t\r\n\t\tset: function(value) {\r\n\t\t\tif (this._pixiData.subInstance) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tconst f = value[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst m = new PIXI.filters.ColorMatrixFilter();\r\n\t\t\t\t\t\tm.matrix = [\r\n\t\t\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tlist.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar o = this._pixiData.instance;\r\n\t\t\t\t\tvar c = o.children;\r\n\t\t\t\t\tvar n = new PIXI.Container();\r\n\t\t\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new PIXI.Container());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\to.addChild(n);\r\n\t\t\t\t\to._filterContainer = nc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.updateTransform();\r\n\t\t\t\t\tnc.calculateBounds();\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\t\t\tconst x = b.x;\r\n\t\t\t\t\tconst y = b.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\t\t\tnc.children[i].x -= x;\r\n\t\t\t\t\t\tnc.children[i].y -= y;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (nc.children[i]._filterContainer) {\r\n\t\t\t\t\t\t\tnc.children[i]._filterContainer.cacheAsBitmap = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn.x = x;\r\n\t\t\t\t\tn.y = y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tnc.filters = list;\r\n\t\t\t\t\tnc.cacheAsBitmap = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (o._filterContainer) {\r\n\t\t\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\t\t\tconst n = nc.parent;\r\n\t\t\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\to.removeChildren();\r\n\t\t\t\t\t\to._filterContainer = null;\r\n\t\t\t\t\t\twhile (c.length) {\r\n\t\t\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnc.filters = null;\r\n\t\t\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._originParams.filters = value;\r\n\t\t}\r\n\t},\r\n\tgetPixi: {\r\n\t\tvalue: function() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction makeClass(parent, unuseAppendix = false) {\r\n\tclass CjsWrap extends parent {\r\n\t\t_overrideCreatejs(pixiClass) {\r\n\t\t\toverrideCreatejs(this, new pixiClass());\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (!unuseAppendix) {\r\n\t\tObject.defineProperties(CjsWrap.prototype, appendixDescriptor);\r\n\t}\r\n\t\r\n\treturn CjsWrap;\r\n}\r\n\r\ncreatejs.MovieClip = class MovieClip extends makeClass(createjsOrigin.MovieClip) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(PIXI.Container);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(PIXI.Container);\r\n\t\tthis._pixiData.subInstance = this._pixiData.instance;//.addChild(new PIXI.Container());\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\taddChild(child) {\r\n\t\tthis._pixiData.subInstance.addChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child, index) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child._pixiData.instance, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis._pixiData.subInstance.removeChild(child._pixiData.instance);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n}\r\n\r\ncreatejs.Sprite = class Sprite extends makeClass(createjsOrigin.Sprite) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(PIXI.Sprite);\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tinitialize() {\r\n\t\tthis._overrideCreatejs(PIXI.Sprite);\r\n\t\t\r\n\t\treturn super.initialize(...arguments);\r\n\t}\r\n\t\r\n\tgotoAndStop() {\r\n\t\tsuper.gotoAndStop(...arguments);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = PIXI.BaseTexture.from(frame.image);\r\n\t\tconst texture = new PIXI.Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}\r\n\r\ncreatejs.Shape = class Sprite extends makeClass(createjsOrigin.Shape) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(PIXI.Container);\r\n\t\tthis._pixiData.masked = [];\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value._pixiData.instance);\r\n\t\t}\r\n\t\t\r\n\t\treturn this._graphics = value;\r\n\t}\r\n}\r\n\r\ncreatejs.Graphics = class Sprite extends makeClass(createjsOrigin.Graphics) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(PIXI.Graphics);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\t\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tmoveTo(x, y) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x, y) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTon(x1, y1, x2, y2, radius) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx, cpy, x, y) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\tconst points = this._pixiData.instance.currentPath.points;\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tcolor = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(color[0]) * COLOR_RED + Number(color[1]) * COLOR_GREEN + Number(color[2]);\r\n\t\tres.alpha = Number(color[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._pixiData.instance.lineStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : caps,\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : joints,\r\n\t\t\tmiterLimit: miterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x, y, w, h, radius) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x, y, radius) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x, y, w, h) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: PIXI.LINE_JOIN.BUTT,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: PIXI.LINE_JOIN.MITER,\r\n\t1: PIXI.LINE_JOIN.ROUND,\r\n\t2: PIXI.LINE_JOIN.BEVEL\r\n};\r\n\r\nObject.defineProperties(createjs.Graphics.prototype, {\r\n\tcurveTo: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\tdrawRect: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tmt: {\r\n\t\tvalue: createjs.Graphics.prototype.moveTo\r\n\t},\r\n\t\r\n\tlt: {\r\n\t\tvalue: createjs.Graphics.prototype.lineTo\r\n\t},\r\n\t\r\n\tat: {\r\n\t\tvalue: createjs.Graphics.prototype.arcTo\r\n\t},\r\n\t\r\n\tbt: {\r\n\t\tvalue: createjs.Graphics.prototype.bezierCurveTo\r\n\t},\r\n\t\r\n\tqt: {\r\n\t\tvalue: createjs.Graphics.prototype.quadraticCurveTo\r\n\t},\r\n\t\r\n\ta: {\r\n\t\tvalue: createjs.Graphics.prototype.arc\r\n\t},\r\n\t\r\n\tr: {\r\n\t\tvalue: createjs.Graphics.prototype.rect\r\n\t},\r\n\t\r\n\tcp: {\r\n\t\tvalue: createjs.Graphics.prototype.closePath\r\n\t},\r\n\t\r\n\tc: {\r\n\t\tvalue: createjs.Graphics.prototype.clear\r\n\t},\r\n\t\r\n\tf: {\r\n\t\tvalue: createjs.Graphics.prototype.beginFill\r\n\t},\r\n\t\r\n\tef: {\r\n\t\tvalue: createjs.Graphics.prototype.endFill\r\n\t},\r\n\t\r\n\tss: {\r\n\t\tvalue: createjs.Graphics.prototype.setStrokeStyle\r\n\t},\r\n\t\r\n\ts: {\r\n\t\tvalue: createjs.Graphics.prototype.beginStroke\r\n\t},\r\n\t\r\n\tdr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRect\r\n\t},\r\n\t\r\n\trr: {\r\n\t\tvalue: createjs.Graphics.prototype.drawRoundRect\r\n\t},\r\n\t\r\n\tdc: {\r\n\t\tvalue: createjs.Graphics.prototype.drawCircle\r\n\t},\r\n\t\r\n\tde: {\r\n\t\tvalue: createjs.Graphics.prototype.drawEllipse\r\n\t},\r\n\t\r\n\tdp: {\r\n\t\tvalue: createjs.Graphics.prototype.drawPolyStar\r\n\t}\r\n});\r\n\r\ncreatejs.Text = class Sprite extends makeClass(createjsOrigin.Text) {\r\n\tconstructor(text, font, color) {\r\n\t\tthis._overrideCreatejs(PIXI.Container);\r\n\t\t\r\n\t\tthis._originParams = Object.assign(this._originParams, {\r\n\t\t\ttext: text,\r\n\t\t\tfont: font,\r\n\t\t\tcolor: color,\r\n\t\t\ttextAlign: 'left',\r\n\t\t\tlineHeight: 0,\r\n\t\t\tlineWidth: 0\r\n\t\t});\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tthis._pixiData.instance.text = this._pixiData.instance.addChild(new PIXI.Text(text, {\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t}));\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._originParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\treturn this._originParams.text = text;\r\n\t}\r\n\t\r\n\t_parseFont(font) {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontSize: Number(p.shift().replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._originParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\treturn this._originParams.font = font;\r\n\t}\r\n\t\r\n\t_parseColor(color) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._originParams.color;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\treturn this._originParams.color = color;\r\n\t}\r\n\t\r\n\t_align(align) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this.lineWidth / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this.lineWidth;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._originParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\treturn this._originParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._originParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.lineHeight = height;\r\n\t\t\r\n\t\treturn this._originParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._originParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.lineWidthWrap = width;\r\n\t\t\r\n\t\treturn this._originParams.lineWidth = width;\r\n\t}\r\n}\r\n\r\ncreatejs.ButtonHelper = class Sprite extends makeClass(createjsOrigin.ButtonHelper, true) {\r\n\tconstructor() {\r\n\t\tthis._overrideCreatejs(PIXI.Container);\r\n\t\t\r\n\t\tconst createjs = arguments[0];\r\n\t\tconst pixi = createjs._pixiData.instance;\r\n\t\t\r\n\t\tconst baseFrame = arguments[1];\r\n\t\tconst overFrame = arguments[2];\r\n\t\tconst downFrame = arguments[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = arguments[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit._pixiData.instance);\r\n\t\thitPixi.alpha = 0.00001\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t\t\r\n\t\tsuper(...arguments);\r\n\t}\r\n}","/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nfunction playSound(id: string, loop: boolean = false) {\r\n\treturn window.createjs.Sound.play(id, {\r\n\t\tinterrupt: window.createjs.Sound.INTERRUPT_EARLY,\r\n\t\tloop: loop\r\n\t});\r\n}\r\n\r\nObject.defineProperties(window, {\r\n\tplaySound: {\r\n\t\tvalue: playSound\r\n\t}\r\n});\r\n\r\nexport {};","import { initAsync as _initAsync, initStage } from '../common/core';\r\nimport * as _PIXI from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const window: any;\r\n\r\nnamespace PIXI {\r\n\texport namespace createjs {\r\n\t\t/**\r\n\t\t * @property useSynchedTimeline Whether the movie clip plays when placed as a \"graphic\".\r\n\t\t */\r\n\t\texport type TCreatejsPlayerOption = {\r\n\t\t\tuseSynchedTimeline?: boolean\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * @see https://tawaship.github.io/Pixim.js/classes/pixim.application.html\r\n\t\t */\r\n\t\texport class Player {\r\n\t\t\tprivate _app: _PIXI.Application;\r\n\t\t\tprivate _id: string;\r\n\t\t\tprivate _rootClass: any;\r\n\t\t\tprivate _basepath: string;\r\n\t\t\tprivate _stage: any;\r\n\t\t\t\r\n\t\t\tconstructor(id: string, rootName: string, basepath: string, pixiOptions: Object = {}) {\r\n\t\t\t\tconst comp = window.AdobeAn.getComposition(id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error('no composition');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib = comp.getLibrary();\r\n\t\t\t\tconst root = lib[rootName];\r\n\t\t\t\tif (!root) {\r\n\t\t\t\t\tthrow new Error('no root class');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst prop = lib.properties;\r\n\t\t\t\t\r\n\t\t\t\tthis._app = new _PIXI.Application(Object.assign(pixiOptions, {\r\n\t\t\t\t\twidth: prop.width,\r\n\t\t\t\t\theight: prop.height,\r\n\t\t\t\t\tbackgroundColor: parseInt(prop.color.slice(1), 16)\r\n\t\t\t\t}));\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.appendChild(this._app.view);\r\n\t\t\t\tthis._app.stop();\r\n\t\t\t\t\r\n\t\t\t\tthis._id = id;\r\n\t\t\t\tthis._rootClass = root;\r\n\t\t\t\tthis._basepath = basepath;\r\n\t\t\t\t\r\n\t\t\t\twindow.createjs.Ticker.framerate = prop.fps;\r\n\t\t\t\t\r\n\t\t\t\tthis._handleTick = this._handleTick.bind(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinitAsync(options: TCreatejsPlayerOption = {}) {\r\n\t\t\t\treturn _initAsync(this._id, this._basepath)\r\n\t\t\t\t\t.then(lib => {\r\n\t\t\t\t\t\tconst exportRoot = new this._rootClass();\r\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis._stage = new lib.Stage();\r\n\t\t\t\t\t\tinitStage(this._stage, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tObject.defineProperties(window, {\r\n\t\t\t\t\t\t\texportRoot: {\r\n\t\t\t\t\t\t\t\tvalue: exportRoot\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstage: {\r\n\t\t\t\t\t\t\t\tvalue: this._stage\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twindow.AdobeAn.compositionLoaded(lib.properties.id);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.render();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._stage.addChild(exportRoot);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._app.stage.addChild(exportRoot.getPixi());\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tplay() {\r\n\t\t\t\twindow.createjs.Ticker.addEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop() {\r\n\t\t\t\twindow.createjs.Ticker.removeEventListener('tick', this._handleTick);\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tprivate _handleTick() {\r\n\t\t\t\tthis._stage._tickFunction();\r\n\t\t\t\tthis.app.render();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tget app(): _PIXI.Application {\r\n\t\t\t\treturn this._app;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TCreatejsPlayerOption = PIXI.createjs.TCreatejsPlayerOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Player = PIXI.createjs.Player;"],"names":["initAsync","id","basepath","const","comp","window","AdobeAn","getComposition","Error","lib","getLibrary","Promise","resolve","reject","properties","manifest","length","loader","createjs","LoadQueue","installPlugin","Sound","addEventListener","evt","images","getImages","item","type","result","handleFileLoad","replace","m","i","src","loadManifest","then","ss","getSpriteSheet","queue","target","ssMetadata","name","SpriteSheet","getResult","frames","initStage","stage","options","useSynchedTimeline","containerDrawFunction","list","this","children","slice","l","child","isVisible","draw","Object","defineProperties","MovieClip","prototype","value","_updateState","_containerDraw","imageDescriptors","Sprite","Graphics","Shape","Text","Bitmap","update","props","tickOnUpdate","tick","dispatchEvent","autoClear","clear","_webGLContext","_batchDraw","_autoPurge","_drawID","purgeTextures","_updateFunction","_handleTick","_tickFunction","e","playSound","loop","play","interrupt","INTERRUPT_EARLY","createjsOrigin","DisplayObject","Container","ButtonHelper","let","_isDown","EventMap","mousedown","types","factory","self","cb","currentTarget","_createjs","ev","data","rawX","global","x","rawY","y","rollover","rollout","pressmove","pressup","DEG_TO_RAD","Math","PI","appendixDescriptor","get","_originParams","set","_pixiData","instance","scaleX","scale","scaleY","skewX","skew","skewY","regX","regObj","regY","rotation","visible","alpha","_off","renderable","Function","func","t","events","push","origin","on","interactive","apply","arguments","removeEventListener","j","off","splice","res","listeners","_listeners","removeAllEventListeners","removeAllListeners","_pixi","mask","masked","once","parent","addChild","filters","subInstance","f","ColorMatrixFilter","PIXI.filters","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","PIXI.Container","nc","_filterContainer","updateTransform","calculateBounds","b","getLocalBounds","cacheAsBitmap","removeChildren","v","getPixi","makeClass","unuseAppendix","CjsWrap","_overrideCreatejs","pixiClass","pixi","regx","regy","anchor","pivot","super","initialize","addChildAt","index","removeChild","removeChildAt","removeAllChldren","PIXI.Sprite","gotoAndStop","frame","spriteSheet","getFrame","currentFrame","baseTexture","PIXI.BaseTexture","from","image","texture","PIXI.Texture","rect","prototypeAccessors","graphics","_graphics","PIXI.Graphics","beginFill","strokeFill","strokeAlpha","moveTo","clone","endFill","containsPoint","beginHole","endHole","lineTo","arcTon","x1","y1","x2","y2","radius","arcTo","arc","startAngle","endAngle","anticlockwise","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","w","h","drawRect","closePath","currentPath","points","_parseColor","color","charAt","parseInt","split","Number","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineStyle","width","cap","LineCap","join","LineJoin","beginStroke","drawRoundRect","drawRoundedRect","drawCircle","drawEllipse","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","PIXI","0","PIXI.LINE_JOIN","BUTT","1","ROUND","2","SQUARE","MITER","BEVEL","curveTo","mt","lt","at","bt","qt","a","r","cp","ef","s","dr","rr","dc","de","dp","text","font","assign","textAlign","lineHeight","lineWidth","_font","_parseFont","PIXI.Text","fontSize","fontFamily","fill","wordWrap","prototypeAccessors$1","_align","p","shift","style","align","height","lineWidthWrap","baseFrame","overFrame","downFrame","hit","hitFrame","hitPixi","isOver","isDown","cursor","Player","rootName","pixiOptions","root","prop","_app","_PIXI.Application","backgroundColor","document","body","appendChild","view","stop","_id","_rootClass","_basepath","Ticker","framerate","fps","bind","_initAsync","exportRoot","_stage","Stage","compositionLoaded","render","app"],"mappings":";;;;;;;;;IAKO,SAASA,UAAUC,IAAIC;QAC7BC,IAAMC,OAAOC,OAAOC,QAAQC,eAAeN;QAC3C,KAAKG;YACJ,MAAM,IAAII,MAAM;;QAGjBL,IAAMM,MAAML,KAAKM;QAEjB,OAAO,IAAIC,kBAASC,SAASC;YACW,MAAnCJ,IAAIK,WAAWC,SAASC,UAC3BJ,QAAQ;YAGTT,IAAMc,SAAS,IAAIC,SAASC,WAAU;YAYtC,IAVAF,OAAOG,cAAcF,SAASG,QAE9BJ,OAAOK,iBAAiB,aAAY,SAASC;iBAuC/C,SAAwBA,KAAKnB;oBAC5BD,IAAMqB,SAASpB,KAAKqB;oBAChBF,OAAyB,WAAjBA,IAAIG,KAAKC,SACpBH,OAAOD,IAAIG,KAAKzB,MAAMsB,IAAIK;iBAzCzBC,CAAeN,KAAKnB;iBAGrBa,OAAOK,iBAAiB,aAAY,SAASC;gBAC5CX,QAAQW;iBAGLrB,UAAU;gBACbA,YAAYA,WAAW,KAAK4B,QAAQ,eAAe;gBAEnD,KADA3B,IAAM4B,IAAItB,IAAIK,WAAWC,UAChBiB,IAAI,GAAGA,IAAID,EAAEf,QAAQgB;oBAC7BD,EAAEC,GAAGC,MAAM/B,WAAW6B,EAAEC,GAAGC;;;YAI7BhB,OAAOiB,aAAazB,IAAIK,WAAWC;YAEnCoB,eAAKZ;YAKL,KAJApB,IAAMiC,KAAKhC,KAAKiC,kBACVC,QAAQf,IAAIgB,QACZC,aAAa/B,IAAI+B,YAEdR,IAAI,GAAGA,IAAIQ,WAAWxB,QAAQgB;gBACtCI,GAAGI,WAAWR,GAAGS,QAAQ,IAAIpC,OAAOa,SAASwB,YAAY;oBACxDlB,QAAQ,EACPc,MAAMK,UAAUH,WAAWR,GAAGS;oBAE/BG,QAAQJ,WAAWR,GAAGY;;;YAIxB,OAAOnC;;;IAiBF,SAASoC,UAAUC,OAAOC;QAGhC,KAFAA,UAAUA,WAAW,IAETC,oBAAoB;YAC/B,SAASC;gBAER,KADA9C,IAAM+C,OAAOC,KAAKC,SAASC,SAClBrB,IAAI,GAAEsB,IAAIJ,KAAKlC,QAAQgB,IAAIsB,GAAGtB,KAAK;oBAC3C7B,IAAMoD,QAAQL,KAAKlB;oBACduB,MAAMC,eACXD,MAAME;;gBAGP,QAAO;;YAORC,OAAOC,iBAAiBzC,SAAS0C,UAAUC,WAAW;gBACrDJ,MAAM;oBACLK,OAAO;wBAEN,OADAX,KAAKY,gBACEZ,KAAKa;;;gBAIdA,gBAAgB;oBACfF,OAAOb;;;YAIT9C,IAAM8D,mBAAmB;gBACxBR,MAAM;oBACLK,OAnBF;wBACC,QAAO;;;;YAsBRJ,OAAOC,iBAAiBzC,SAASgD,OAAOL,WAAWI,mBACnDP,OAAOC,iBAAiBzC,SAASiD,SAASN,WAAWI;YACrDP,OAAOC,iBAAiBzC,SAASkD,MAAMP,WAAWI,mBAClDP,OAAOC,iBAAiBzC,SAASmD,KAAKR,WAAWI;YACjDP,OAAOC,iBAAiBzC,SAASoD,OAAOT,WAAWI,mBAEnDnB,MAAMyB,SAAS,SAASC;gBACnBrB,KAAKsB,gBAAgBtB,KAAKuB,KAAKF,QACnCrB,KAAKwB,cAAc,cACfxB,KAAKyB,aAAazB,KAAK0B;gBAEvB1B,KAAK2B,iBACR3B,KAAK4B,WAAW5B,MAAMA,KAAK2B,iBACH,KAApB3B,KAAK6B,cAAsB7B,KAAK8B,WAAU9B,KAAK6B,aAAW,IAAG,MAChE7B,KAAK+B,cAAc/B,KAAK6B,eAGzB7B,KAAKM;gBAGNN,KAAKwB,cAAc;eAGpB7B,MAAMW,OAAOR,uBAEbH,MAAMqC,kBAAkBrC,MAAMyB;;YAE9BzB,MAAMqC,kBAAkBrC,MAAM4B;;QAG3B5B,MAAMsC,cACTtC,MAAMuC,gBAAgB,SAASC;YAC9BxC,MAAMqC,mBACNrC,MAAMsC;YAGPtC,MAAMuC,gBAAgB,SAASC;YAC9BxC,MAAMqC;;;ICtITzB,OAAOC,iBAAiBtD,QAAQ;QAC/BkF,WAAW;YACVzB,OATF,SAAmB7D,IAAYuF;gBAC9B,mCAD8C,IACvCnF,OAAOa,SAASG,MAAMoE,KAAKxF,IAAI;oBACrCyF,WAAWrF,OAAOa,SAASG,MAAMsE;oBACjCH,MAAMA;;;;;IDkJRrF,IAAMyF,iBAAiB;QACtBC,eAAe3E,SAAS2E;QACxBjC,WAAW1C,SAAS0C;QACpBM,QAAQhD,SAASgD;QACjB4B,WAAW5E,SAAS4E;QACpBzB,MAAMnD,SAASmD;QACfD,OAAOlD,SAASkD;QAChBD,UAAUjD,SAASiD;QACnB4B,cAAc7E,SAAS6E;;IAyCxBC,IAAIC,WAAU,GAKRC,WAAW;QAChBC,WAAW;YACVC,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASjB;oBACfA,EAAEkB,gBAAgBlB,EAAEkB,cAAcC,WAElCnB,EAAE/C,SAAS+C,EAAE/C,OAAOkE;oBACpBtG,IAAMuG,KAAKpB,EAAEqB;oBACbrB,EAAEsB,OAAOF,GAAGG,OAAOC,GACnBxB,EAAEyB,OAAOL,GAAGG,OAAOG,GAEnBf,WAAU,GAEVM,GAAGjB;;;;QAuBN2B,UAAU;YACTb,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASjB;oBACfA,EAAEkB,gBAAgBlB,EAAEkB,cAAcC,WAElCnB,EAAE/C,SAAS+C,EAAE/C,OAAOkE;oBACpBtG,IAAMuG,KAAKpB,EAAEqB;oBACbrB,EAAEsB,OAAOF,GAAGG,OAAOC,GACnBxB,EAAEyB,OAAOL,GAAGG,OAAOG,GAEnBf,WAAU,GAEVM,GAAGjB;;;;QAIN4B,SAAS;YACRd,OAAO,EAAC;YACRC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASjB;oBACfA,EAAEkB,gBAAgBlB,EAAEkB,cAAcC,WAElCnB,EAAE/C,SAAS+C,EAAEkB,cAAcC;oBAC3BtG,IAAMuG,KAAKpB,EAAEqB;oBACbrB,EAAEsB,OAAOF,GAAGG,OAAOC,GACnBxB,EAAEyB,OAAOL,GAAGG,OAAOG,GAEnBf,WAAU,GAEVM,GAAGjB;;;;QAIN6B,WAAU;YACTf,OAAO,EAAC;YACRC,SAAU,SAASC,MAAMC;gBACxB,OAAO,SAASjB;oBACf,IAAKW,SAAL;wBAIAX,EAAEkB,gBAAgBF,MAElBhB,EAAE/C,SAAS+C,EAAE/C,UAAU+C,EAAE/C,OAAOkE;wBAChCtG,IAAMuG,KAAKpB,EAAEqB;wBACbrB,EAAEsB,OAAOF,GAAGG,OAAOC,GACnBxB,EAAEyB,OAAOL,GAAGG,OAAOG,GAEnBT,GAAGjB;;;;;QAIN8B,SAAS;YACRhB,OAAO,EAAC,aAAa;YACrBC,SAAS,SAASC,MAAMC;gBACvB,OAAO,SAASjB;oBACf,IAAKW,SAAL;wBAIAX,EAAEkB,gBAAgBF,MAElBL,WAAU,GAEVX,EAAE/C,SAAS+C,EAAE/C,UAAU+C,EAAE/C,OAAOkE;wBAChCtG,IAAMuG,KAAKpB,EAAEqB;wBACbrB,EAAEsB,OAAOF,GAAGG,OAAOC,GACnBxB,EAAEyB,OAAOL,GAAGG,OAAOG,GAEnBT,GAAGjB;;;;;OASD+B,aAAaC,KAAKC,KAAK,KAevBC,qBAAqB;QAC1BV,GAAG;YACFW,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcZ;;YAG3Ba,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASf,IAAIhD,OACrBX,KAAKuE,cAAcZ,IAAIhD;;;QAGhCkD,GAAG;YACFS,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcV;;YAG3BW,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASb,IAAIlD,OACrBX,KAAKuE,cAAcV,IAAIlD;;;QAGhCgE,QAAQ;YACPL,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcI;;YAG3BH,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASE,MAAMjB,IAAIhD,OAC3BX,KAAKuE,cAAcI,SAAShE;;;QAGrCkE,QAAQ;YACPP,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcM;;YAG3BL,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASE,MAAMf,IAAIlD,OAC3BX,KAAKuE,cAAcM,SAASlE;;;QAGrCmE,OAAO;YACNR,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcO;;YAG3BN,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASK,KAAKpB,KAAKhD,QAAQuD,YACnClE,KAAKuE,cAAcO,QAAQnE;;;QAGpCqE,OAAO;YACNV,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcS;;YAG3BR,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASK,KAAKlB,IAAIlD,QAAQuD,YAClClE,KAAKuE,cAAcS,QAAQrE;;;QAIpCsE,MAAM;YACLX,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcU;;YAG3BT,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUS,OAAOvB,IAAIhD,OACnBX,KAAKuE,cAAcU,OAAOtE;;;QAGnCwE,MAAM;YACLb,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcY;;YAG3BX,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUS,OAAOrB,IAAIlD,OACnBX,KAAKuE,cAAcY,OAAOxE;;;QAGnCyE,UAAU;YACTd,KAAK;gBACJ,OAAOtE,KAAKuE,cAAca;;YAG3BZ,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASU,WAAWzE,QAAQuD,YACpClE,KAAKuE,cAAca,WAAWzE;;;QAGvC0E,SAAS;YACRf,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcc;;YAG3Bb,KAAK,SAAS7D;gBAGb,OAFAA,UAAUA,OACVX,KAAKyE,UAAUC,SAASW,UAAU1E,OAC3BX,KAAKuE,cAAcc,UAAU1E;;;QAGtC2E,OAAO;YACNhB,KAAK;gBACJ,OAAOtE,KAAKuE,cAAce;;YAG3Bd,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASY,QAAQ3E,OACzBX,KAAKuE,cAAce,QAAQ3E;;;QAGpC4E,MAAM;YACLjB,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcgB;;YAG3Bf,KAAK,SAAS7D;gBAEb,OADAX,KAAKyE,UAAUC,SAASc,cAAc7E,OAC/BX,KAAKuE,cAAcgB,OAAO5E;;;QAcnCxC,kBAAkB;YACjBwC,OAAO,SAASnC,MAAM4E;gBACrB,IAAMA,cAAcqC,UAApB;oBAIA,IAAIjH,QAAQuE,UAAU;wBAOrB,KANA/F,IAAMuG,KAAKR,SAASvE,OAEdkH,OAAOnC,GAAGL,QAAQlD,MAAMoD,KAExBH,QAAQM,GAAGN,OAERpE,IAAI,GAAGA,IAAIoE,MAAMpF,QAAQgB,KAAK;4BACtC7B,IAAM2I,IAAI1C,MAAMpE;4BAEhBmB,KAAKyE,UAAUmB,OAAOD,KAAK3F,KAAKyE,UAAUmB,OAAOD,MAAM,IACvD3F,KAAKyE,UAAUmB,OAAOD,GAAGE,KAAK;gCAAEH,MAAMA;gCAAMI,QAAQ1C;gCAEpDpD,KAAKyE,UAAUC,SAASqB,GAAGJ,GAAGD;;wBAG/B1F,KAAKyE,UAAUC,SAASsB,eAAc;;oBAGvC,OAAOvD,eAAeC,cAAchC,UAAUvC,iBAAiB8H,MAAMjG,MAAMkG;;;;QAG7EC,qBAAqB;YACpBxF,OAAO,SAASnC,MAAM4E;gBACrB,IAAI5E,QAAQuE;oBAKX,KAJA/F,IAAMuG,KAAKR,SAASvE,OAEdyE,QAAQM,GAAGN,OAERpE,IAAI,GAAGA,IAAIoE,MAAMpF,QAAQgB,KAAK;wBACtC7B,IAAM2I,IAAI1C,MAAMpE,IAEVkB,OAAOC,KAAKyE,UAAUmB,OAAOD;wBAEnC,IAAI5F,MAAM;4BACT,KAAK,IAAIqG,IAAIrG,KAAKlC,SAAS,GAAGuI,KAAK,GAAGA;gCACrC,IAAIrG,KAAKqG,GAAGN,WAAW1C,IAAI;oCAC1BpD,KAAKyE,UAAUC,SAAS2B,IAAIV,GAAG5F,KAAKqG,GAAGV,OAEvC3F,KAAKuG,OAAOF,GAAG;oCACf;;;4BAIkB,MAAhBrG,KAAKlC,iBACDmC,KAAKyE,UAAUmB,OAAOD;;;;gBAMjC3I,IAAMuJ,MAAM9D,eAAeC,cAAchC,UAAUyF,oBAAoBF,MAAMjG,MAAMkG,YAE7EM,YAAYxG,KAAKyG;gBACvB,KAAKD;oBACJ,OAAOD;;gBAKR,KAAK1D,IAAIhE,OAAKkE;oBACb,IAAKyD,UAAU3H,QAIX2H,UAAU3H,KAAGhB,SAAS;wBAEzB;;;gBAIF,OAAO0I;;;QAGTG,yBAAyB;YACxB/F,OAAO,SAASnC;gBAKf,OAJAwB,KAAKyE,UAAUC,SAASiC,mBAAmBnI,OAC3CwB,KAAK4G,MAAMlC,SAASsB,eAAc;gBAClChG,KAAKyE,UAAUmB,SAAS,IAEjBnD,eAAeC,cAAchC,UAAUgG,wBAAwBT,MAAMjG,MAAMkG;;;QAGpFW,MAAM;YACLvC,KAAK;gBACJ,OAAOtE,KAAKuE,cAAcsC;;YAG3BrC,KAAK,SAAS7D;gBAYb,OAXIA,SACHA,MAAM8D,UAAUqC,OAAOjB,KAAK7F,KAAKyE,UAAUC,WAC3C1E,KAAKyE,UAAUC,SAASmC,OAAOlG,MAAM8D,UAAUC;gBAE/C1E,KAAKyE,UAAUC,SAASqC,KAAK,UAAS;oBACrC/G,KAAKgH,OAAOC,SAAStG,MAAM8D,UAAUC;uBAGtC1E,KAAKyE,UAAUC,SAASmC,OAAO,MAGzB7G,KAAKuE,cAAcsC,OAAOlG;;;QAGnCuG,SAAS;YACR5C,KAAK;gBACJ,OAAOtE,KAAKuE,cAAc2C;;YAG3B1C,KAAK,SAAS7D;gBACb,IAAIX,KAAKyE,UAAU0C;oBAClB,IAAIxG,OAAO;wBAGV,KAFA3D,IAAM+C,OAAO,IAEJlB,IAAI,GAAGA,IAAI8B,MAAM9C,QAAQgB,KAAK;4BACtC7B,IAAMoK,IAAIzG,MAAM9B;4BAEhB,MAAIuI,aAAarJ,SAASsJ,oBAA1B;gCAIArK,IAAM4B,IAAI,IAAI0I,eAAaD;gCAC3BzI,EAAE2I,SAAS,EACVH,EAAEI,eAAe,GAAG,GAAG,GAAGJ,EAAEK,YAAY,KACxC,GAAGL,EAAEM,iBAAiB,GAAG,GAAGN,EAAEO,cAAc,KAC5C,GAAG,GAAGP,EAAEQ,gBAAgB,GAAGR,EAAES,aAAa,KAC1C,GAAG,GAAG,GAAGT,EAAEU,iBAAiBV,EAAEW,cAAc,KAC5C,GAAG,GAAG,GAAG,GAAG;gCAEbhI,KAAK8F,KAAKjH;;;wBAQX,KALA,IAAIoJ,IAAIhI,KAAKyE,UAAUC,UACnBuD,IAAID,EAAE/H,UACNiI,IAAI,IAAIC,kBACRC,KAAKpI,KAAKyE,UAAU0C,cAAce,EAAEjB,SAAS,IAAIkB,mBAE9CF,EAAEpK;4BACRuK,GAAGnB,SAASgB,EAAE;;wBAGfD,EAAEf,SAASiB,IACXF,EAAEK,mBAAmBD,IAErBA,GAAGE,mBACHF,GAAGG;wBAEHvL,IAAMwL,IAAIJ,GAAGK,kBACP9E,IAAI6E,EAAE7E,GACNE,IAAI2E,EAAE3E;wBAEZ,KAAShF,IAAI,GAAGA,IAAIuJ,GAAGnI,SAASpC,QAAQgB;4BACvCuJ,GAAGnI,SAASpB,GAAG8E,KAAKA,GACpByE,GAAGnI,SAASpB,GAAGgF,KAAKA,GAEhBuE,GAAGnI,SAASpB,GAAGwJ,qBAClBD,GAAGnI,SAASpB,GAAGwJ,iBAAiBK,iBAAgB;;wBAGlDR,EAAEvE,IAAIA,GACNuE,EAAErE,IAAIA,GAENuE,GAAGlB,UAAUnH,MACbqI,GAAGM,iBAAgB;2BACb;wBACN1L,IAAMgL,MAAIhI,KAAKyE,UAAUC;wBAEzB,IAAIsD,IAAEK,kBAAkB;4BACvBrL,IAAMoL,OAAKpI,KAAKyE,UAAU0C,aACpBe,MAAIE,KAAGpB,QACPiB,MAAIG,KAAGnI;4BAIb,KAFA+H,IAAEW,kBACFX,IAAEK,mBAAmB,MACdJ,IAAEpK,UAAQ;gCAChBb,IAAM4L,IAAIZ,IAAEf,SAASgB,IAAE;gCACvBW,EAAEjF,KAAKuE,IAAEvE,GACTiF,EAAE/E,KAAKqE,IAAErE;;4BAGVuE,KAAGlB,UAAU,MACbkB,KAAGM,iBAAgB,GAEnB1I,KAAKyE,UAAU0C,cAAca;;;;gBAKhC,OAAOhI,KAAKuE,cAAc2C,UAAUvG;;;QAGtCkI,SAAS;YACRlI,OAAO;gBACN,OAAOX,KAAKyE,UAAUC;;;;IAQzB,SAASoE,UAAU9B,QAAQ+B;sDAAgB;QAC1C,IAAMC;;;;;uEACLC,6BAAkBC;gBAjgBpB,IAA0B/F,MAAMgG;gBAANhG,OAkgBNnD,MAlgBYmJ,OAkgBN,IAAID,WAjgB7B/F,KAAKoB,gBAAgB;oBACpBZ,GAAG;oBACHE,GAAG;oBACHc,QAAQ;oBACRE,QAAQ;oBACRuE,MAAM;oBACNC,MAAM;oBACNvE,OAAO;oBACPE,OAAO;oBACPI,UAAU;oBACVC,UAAS;oBACTC,OAAO;oBACPC,OAAM;oBACNsB,MAAM;oBACNK,SAAS;mBAGViC,KAAK7F,YAAYH,MAEjBA,KAAKsB,YAAY;oBAChBC,UAAUyE;oBACVjE,QAAQiE,KAAKG,UAAUH,KAAKI;oBAC5B3D,QAAQ;;;UAyeaoB;QAUtB,OAJK+B,iBACJxI,OAAOC,iBAAiBwI,QAAQtI,WAAW2D;QAGrC2E;;IAGRjL,SAAS0C;QACR;YACCT,KAAKiJ,kBAAkBd,mBAEvBqB,uBAAStD;;;yEAGVuD;YAIC,OAHAzJ,KAAKiJ,kBAAkBd,mBACvBnI,KAAKyE,UAAU0C,cAAcnH,KAAKyE,UAAUC;YAErC8E,qBAAMC,uBAAcvD;+BAG5Be,oBAAS7G;YAGR,OAFAJ,KAAKyE,UAAU0C,YAAYF,SAAS7G,MAAMqE,UAAUC,WAE7C8E,qBAAMvC,oBAAS7G;+BAGvBsJ,sBAAWtJ,OAAOuJ;YAGjB,OAFA3J,KAAKyE,UAAU0C,YAAYuC,WAAWtJ,MAAMqE,UAAUC,UAAUiF,QAEzDH,qBAAME,sBAAWtJ,OAAOuJ;+BAGhCC,uBAAYxJ;YAGX,OAFAJ,KAAKyE,UAAU0C,YAAYyC,YAAYxJ,MAAMqE,UAAUC,WAEhD8E,qBAAMI,uBAAYxJ;+BAG1ByJ,yBAAcF;YAGb,OAFA3J,KAAKyE,UAAU0C,YAAY0C,cAAcF,QAElCH,qBAAMK,yBAAcF;+BAG5BG;YAGC,OAFA9J,KAAKyE,UAAU0C,YAAYwB,kBAEpBa,qBAAMM;;4CAIf/L,SAASgD;QACR;YACCf,KAAKiJ,kBAAkBc,gBAEvBP,uBAAStD;;;gEAGVuD;YAGC,OAFAzJ,KAAKiJ,kBAAkBc,gBAEhBP,qBAAMC,uBAAcvD;4BAG5B8D;YACCR,qBAAMQ,wBAAe9D;YAErBlJ,IAAMiN,QAAQjK,KAAKkK,YAAYC,SAASnK,KAAKoK,eACvCC,cAAcC,mBAAiBC,KAAKN,MAAMO,QAC1CC,UAAU,IAAIC,eAAaL,aAAaJ,MAAMU;YAEpD3K,KAAKyE,UAAUC,SAAS+F,UAAUA;;yCAIpC1M,SAASkD;QACR;YACCjB,KAAKiJ,kBAAkBd,mBACvBnI,KAAKyE,UAAUqC,SAAS,IAExB0C,uBAAStD;;;;;;;;;eAGV0E,mBAAIC;YACH,OAAO7K,KAAK8K;WAGbF,mBAAIC,wBAASlK;YACZ,IAAIX,KAAKyE,UAAUqC,OAAOjJ;gBAGzB,IAFAmC,KAAKyE,UAAUC,SAASiE,kBAEpBhI;oBACH,KAAKkC,IAAIhE,IAAI,GAAGA,IAAImB,KAAKyE,UAAUqC,OAAOjJ,QAAQgB;wBACjDmB,KAAKyE,UAAUqC,OAAOjI,GAAGgI,OAAO7G,KAAKyE,UAAUC;;;oBAGhD,KAAK7B,IAAIhE,MAAI,GAAGA,MAAImB,KAAKyE,UAAUqC,OAAOjJ,QAAQgB;wBACjDmB,KAAKyE,UAAUqC,OAAOjI,KAAGgI,OAAO;;;;YASnC,OAJIlG,SACHX,KAAKyE,UAAUC,SAASuC,SAAStG,MAAM8D,UAAUC,WAG3C1E,KAAK8K,YAAYnK;;wCAI1B5C,SAASiD;QACR;YACChB,KAAKiJ,kBAAkB8B,kBAEvB/K,KAAKyE,UAAUC,SAASsG,UAAU,UAAU;YAE5ChL,KAAKyE,UAAUwG,aAAa,GAC5BjL,KAAKyE,UAAUyG,cAAc,GAE7B1B,uBAAStD;;;gEAGViF,kBAAOxH,GAAGE;YAST,OARI7D,KAAKyE,UAAUC,SAAS0G,QAAQC,UAAUC,cAAc;gBAAC3H,GAAGA;gBAAGE,GAAGA;iBACrE7D,KAAKyE,UAAUC,SAAS6G,cAExBvL,KAAKyE,UAAUC,SAAS8G,WAGzBxL,KAAKyE,UAAUC,SAASyG,OAAOxH,GAAGE;YAE3B2F,qBAAM2B,kBAAOxH,GAAGE;4BAGxB4H,kBAAO9H,GAAGE;YAGT,OAFA7D,KAAKyE,UAAUC,SAAS+G,OAAO9H,GAAGE,IAE3B2F,qBAAMiC,kBAAO9H,GAAGE;4BAGxB6H,kBAAOC,IAAIC,IAAIC,IAAIC,IAAIC;YAGtB,OAFA/L,KAAKyE,UAAUC,SAASsH,MAAML,IAAIC,IAAIC,IAAIC,IAAIC,SAEvCvC,qBAAMwC,iBAAML,IAAIC,IAAIC,IAAIC,IAAIC;4BAGpCE,eAAItI,GAAGE,GAAGkI,QAAQG,YAAYC,UAAUC;YAGvC,OAFApM,KAAKyE,UAAUC,SAASuH,IAAItI,GAAGE,GAAGkI,QAAQG,YAAYC,UAAUC;YAEzD5C,qBAAMyC,eAAItI,GAAGE,GAAGkI,QAAQG,YAAYC,UAAUC;4BAGtDC,4BAAiBC,KAAKC,KAAK5I,GAAGE;YAG7B,OAFA7D,KAAKyE,UAAUC,SAAS2H,iBAAiBC,KAAKC,KAAK5I,GAAGE,IAE/C2F,qBAAM6C,4BAAiBC,KAAKC,KAAK5I,GAAGE;4BAG5C2I,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMjJ,GAAGE;YAGxC,OAFA7D,KAAKyE,UAAUC,SAAS8H,cAAcC,MAAMC,MAAMC,MAAMC,MAAMjJ,GAAGE,IAE1D2F,qBAAMgD,yBAAcC,MAAMC,MAAMC,MAAMC,MAAMjJ,GAAGE;4BAGvD8G,gBAAKhH,GAAGE,GAAGgJ,GAAGC;YAGb,OAFA9M,KAAKyE,UAAUC,SAASqI,SAASpJ,GAAGE,GAAGgJ,GAAGC,IAEnCtD,qBAAMmB,gBAAKhH,GAAGE,GAAGgJ,GAAGC;4BAG5BE;YACChN,KAAKyE,UAAUC,SAASsI;YAEThN,KAAKyE,UAAUC,SAASuI,YAAYC;YAEnD,OAAO1D,qBAAMwD;4BAGdtL;YAGC,OAFA1B,KAAKyE,UAAUC,SAAShD,SAEjB8H,qBAAM9H;4BAGdyL,uBAAYC;YACXpQ,IAAMuJ,MAAM;gBACX6G,OAAO;gBACP9H,OAAO;;YAGR,OAAK8H,QAKmB,QAApBA,MAAMC,OAAO,MAChB9G,IAAI6G,QAAQE,SAASF,MAAMlN,MAAM,IAAI;YAC9BqG,QAGR6G,QAAQA,MAAMzO,QAAQ,kBAAkB,IAAI4O,MAAM,MAElDhH,IAAI6G,QAhjBY,QAgjBJI,OAAOJ,MAAM,MA3iBP,MA2iByBI,OAAOJ,MAAM,MAAoBI,OAAOJ,MAAM;YACzF7G,IAAIjB,QAAQkI,OAAOJ,MAAM,KAElB7G,QAdNA,IAAIjB,QAAQ,GACLiB;4BAgBTyE,qBAAUoC;YACTpQ,IAAMiL,IAAIjI,KAAKmN,YAAYC;YAG3B,OAFApN,KAAKyE,UAAUC,SAASsG,UAAU/C,EAAEmF,OAAOnF,EAAE3C,QAEtCkE,qBAAMwB,qBAAUoC;4BAGxB/B;YAGC,OAFArL,KAAKyE,UAAUC,SAAS2G,WAEjB7B,qBAAM6B;4BAGdoC,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;YAUnD,OATA9N,KAAKyE,UAAUC,SAASqJ,UAAU;gBACjCC,OAAON;gBACPN,OAAOpN,KAAKyE,UAAUwG;gBACtB3F,OAAOtF,KAAKyE,UAAUyG;gBACtB+C,KAAMN,QAAQO,UAAWA,QAAQP,QAAQA;gBACzCQ,MAAOP,UAAUQ,WAAYA,SAASR,UAAUA;gBAChDC,YAAYA;gBAGNrE,qBAAMiE,0BAAeC,WAAWC,MAAMC,QAAQC,YAAYC;4BAGlEO,uBAAYjB;YACXpQ,IAAMiL,IAAIjI,KAAKmN,YAAYC;YAI3B,OAHApN,KAAKyE,UAAUwG,aAAahD,EAAEmF,OAC9BpN,KAAKyE,UAAUyG,cAAcjD,EAAE3C;YAExBkE,qBAAM6E,uBAAYjB;4BAG1BkB,yBAAc3K,GAAGE,GAAGgJ,GAAGC,GAAGf;YAGzB,OAFA/L,KAAKyE,UAAUC,SAAS6J,gBAAgB5K,GAAGE,GAAGgJ,GAAGC,GAAGf,SAE7CvC,qBAAM8E,yBAAc3K,GAAGE,GAAGgJ,GAAGC,GAAGf;4BAGxCyC,sBAAW7K,GAAGE,GAAGkI;YAGhB,OAFA/L,KAAKyE,UAAUC,SAAS8J,WAAW7K,GAAGE,GAAGkI,SAElCvC,qBAAMgF,sBAAW7K,GAAGE,GAAGkI;4BAG/B0C,uBAAY9K,GAAGE,GAAGgJ,GAAGC;YAGpB,OAFA9M,KAAKyE,UAAUC,SAAS+J,YAAY9K,GAAGE,GAAGgJ,GAAGC,IAEtCtD,qBAAMiF,uBAAY9K,GAAGE,GAAGgJ,GAAGC;4BAGnC4B,wBAAa/K,GAAGE,GAAGkI,QAAQ4C,OAAOC,WAAWC;YAG5C,OAFA7O,KAAKyE,UAAUC,SAASoK,mBAAmBnL,GAAGE,GAAGkI,QAAQ4C,OAAOE,QAAQ3K;YAEjEsF,qBAAMkF,wBAAa/K,GAAGE,GAAGkI,QAAQ4C,OAAOC,WAAWC;;;IAO5D7R,IEr7BU+R,MFq7BJb,UAAU;QACfc,GAAGC,iBAAeC;QAClBC,GAAGF,iBAAeG;QAClBC,GAAGJ,iBAAeK;OAMblB,WAAW;QAChBY,GAAGC,iBAAeM;QAClBJ,GAAGF,iBAAeG;QAClBC,GAAGJ,iBAAeO;;IAGnBjP,OAAOC,iBAAiBzC,SAASiD,SAASN,WAAW;QACpD+O,SAAS;YACR9O,OAAO5C,SAASiD,SAASN,UAAU2L;;QAGpCU,UAAU;YACTpM,OAAO5C,SAASiD,SAASN,UAAUiK;;QAGpC+E,IAAI;YACH/O,OAAO5C,SAASiD,SAASN,UAAUyK;;QAGpCwE,IAAI;YACHhP,OAAO5C,SAASiD,SAASN,UAAU+K;;QAGpCmE,IAAI;YACHjP,OAAO5C,SAASiD,SAASN,UAAUsL;;QAGpC6D,IAAI;YACHlP,OAAO5C,SAASiD,SAASN,UAAU8L;;QAGpCsD,IAAI;YACHnP,OAAO5C,SAASiD,SAASN,UAAU2L;;QAGpC0D,GAAG;YACFpP,OAAO5C,SAASiD,SAASN,UAAUuL;;QAGpC+D,GAAG;YACFrP,OAAO5C,SAASiD,SAASN,UAAUiK;;QAGpCsF,IAAI;YACHtP,OAAO5C,SAASiD,SAASN,UAAUsM;;QAGpC/E,GAAG;YACFtH,OAAO5C,SAASiD,SAASN,UAAUgB;;QAGpC0F,GAAG;YACFzG,OAAO5C,SAASiD,SAASN,UAAUsK;;QAGpCkF,IAAI;YACHvP,OAAO5C,SAASiD,SAASN,UAAU2K;;QAGpCpM,IAAI;YACH0B,OAAO5C,SAASiD,SAASN,UAAU+M;;QAGpC0C,GAAG;YACFxP,OAAO5C,SAASiD,SAASN,UAAU2N;;QAGpC+B,IAAI;YACHzP,OAAO5C,SAASiD,SAASN,UAAUqM;;QAGpCsD,IAAI;YACH1P,OAAO5C,SAASiD,SAASN,UAAU4N;;QAGpCgC,IAAI;YACH3P,OAAO5C,SAASiD,SAASN,UAAU8N;;QAGpC+B,IAAI;YACH5P,OAAO5C,SAASiD,SAASN,UAAU+N;;QAGpC+B,IAAI;YACH7P,OAAO5C,SAASiD,SAASN,UAAUgO;;QAIrC3Q,SAASmD;QACR,gBAAYuP,MAAMC,MAAMtD;YACvBpN,KAAKiJ,kBAAkBd,mBAEvBnI,KAAKuE,gBAAgBhE,OAAOoQ,OAAO3Q,KAAKuE,eAAe;gBACtDkM,MAAMA;gBACNC,MAAMA;gBACNtD,OAAOA;gBACPwD,WAAW;gBACXC,YAAY;gBACZC,WAAW;;YAGZ9T,IAAM+T,QAAQ/Q,KAAKgR,WAAWN;YAE9B1Q,KAAKyE,UAAUC,SAAS+L,OAAOzQ,KAAKyE,UAAUC,SAASuC,SAAS,IAAIgK,YAAUR,MAAM;gBACnFS,UAAUH,MAAMG;gBAChBC,YAAYJ,MAAMI;gBAClBC,MAAMpR,KAAKmN,YAAYC;gBACvBiE,WAAU;iBAGX7H,uBAAStD;;;;;;;;;;;;;;;;;;;;;;;;eAGVoL,qBAAIb;YACH,OAAOzQ,KAAKuE,cAAckM;WAG3Ba,qBAAIb,oBAAKA;YAIR,OAHAzQ,KAAKyE,UAAUC,SAAS+L,KAAKA,OAAOA,MACpCzQ,KAAKuR,OAAOvR,KAAK4Q,YAEV5Q,KAAKuE,cAAckM,OAAOA;4BAGlCO,sBAAWN;YACV1T,IAAMwU,IAAId,KAAKnD,MAAM;YAErB,OAAO;gBACN2D,UAAU1D,OAAOgE,EAAEC,QAAQ9S,QAAQ,MAAM;gBACzCwS,YAAYK,EAAErD,KAAK,KAAKxP,QAAQ,MAAM;;WAIxC2S,qBAAIZ;YACH,OAAO1Q,KAAKuE,cAAcmM;WAG3BY,qBAAIZ,oBAAKA;YACR1T,IAAM+T,QAAQ/Q,KAAKgR,WAAWN;YAI9B,OAHA1Q,KAAKyE,UAAUC,SAAS+L,KAAKiB,MAAMR,WAAWH,MAAMG,UACpDlR,KAAKyE,UAAUC,SAAS+L,KAAKiB,MAAMP,aAAaJ,MAAMI;YAE/CnR,KAAKuE,cAAcmM,OAAOA;4BAGlCvD,uBAAYC;YACX,OAAOE,SAASF,MAAMlN,MAAM,IAAI;WAGjCoR,qBAAIlE;YACH,OAAOpN,KAAKuE,cAAc6I;WAE3BkE,qBAAIlE,qBAAMA;YAGT,OAFApN,KAAKyE,UAAUC,SAAS+L,KAAKiB,MAAMN,OAAOpR,KAAKmN,YAAYC,QAEpDpN,KAAKuE,cAAc6I,QAAQA;4BAGnCmE,kBAAOI;YACQ,WAAVA,QAKU,aAAVA,QAKU,YAAVA,UACH3R,KAAKyE,UAAUC,SAAS+L,KAAK9M,KAAM3D,KAAK8Q,aALxC9Q,KAAKyE,UAAUC,SAAS+L,KAAK9M,KAAK3D,KAAK8Q,YAAY,IALnD9Q,KAAKyE,UAAUC,SAAS+L,KAAK9M,IAAI;WAenC2N,qBAAIV;YACH,OAAO5Q,KAAKuE,cAAcqM;WAG3BU,qBAAIV,yBAAUe;YAIb,OAHA3R,KAAKyE,UAAUC,SAAS+L,KAAKiB,MAAMC,QAAQA,OAC3C3R,KAAKuR,OAAOI,QAEL3R,KAAKuE,cAAcqM,YAAYe;WAGvCL,qBAAIT;YACH,OAAO7Q,KAAKuE,cAAcsM;WAG3BS,qBAAIT,0BAAWe;YAGd,OAFA5R,KAAKyE,UAAUC,SAAS+L,KAAKI,aAAae,QAEnC5R,KAAKuE,cAAcsM,aAAae;WAGxCN,qBAAIR;YACH,OAAO9Q,KAAKuE,cAAcuM;WAG3BQ,qBAAIR,yBAAU9C;YAGb,OAFAhO,KAAKyE,UAAUC,SAAS+L,KAAKoB,gBAAgB7D,OAEtChO,KAAKuE,cAAcuM,YAAY9C;;uCAIxCjQ,SAAS6E;QACR;YACC5C,KAAKiJ,kBAAkBd;YAEvBnL,IAAMe,WAAWmI,UAAU,IACrBiD,OAAOpL,SAAS0G,UAAUC,UAE1BoN,YAAY5L,UAAU,IACtB6L,YAAY7L,UAAU,IACtB8L,YAAY9L,UAAU,IACtB+L,MAAM/L,UAAU,IAChBgM,WAAWhM,UAAU;YAE3B+L,IAAIjI,YAAYkI;YAChBlV,IAAMmV,UAAUhJ,KAAKlC,SAASgL,IAAIxN,UAAUC;YAC5CyN,QAAQ7M,QAAQ;YAEhBzC,IAAIuP,UAAS,GACTC,UAAS;YAEbF,QAAQpM,GAAG,gBAAe;gBACzBqM,UAAS,GACLC,SACHtU,SAASiM,YAAYgI,aAErBjU,SAASiM,YAAY+H;iBAIvBI,QAAQpM,GAAG,eAAc;gBACxBqM,UAAS,GAELC,SACHtU,SAASiM,YAAY+H,aAErBhU,SAASiM,YAAY8H;iBAIvBK,QAAQpM,GAAG,gBAAe;gBACzBsM,UAAS,GACTtU,SAASiM,YAAYgI;iBAGtBG,QAAQpM,GAAG,cAAa;gBACvBsM,UAAS,GACLD,SACHrU,SAASiM,YAAY+H,aAErBhU,SAASiM,YAAY8H;iBAIvBK,QAAQpM,GAAG,qBAAoB;gBAC9BsM,UAAS,GACLD,SACHrU,SAASiM,YAAY+H,aAErBhU,SAASiM,YAAY8H;iBAIvBK,QAAQnM,eAAc,GACtBmM,QAAQG,SAAS,WAEjB9I,uBAAStD;;;;mDE9sCX,SAAU6I;SACT,SAAiBhR;YAWhB,IAAawU,SAOZ,SAAYzV,IAAY0V,UAAkBzV,UAAkB0V;yDAAsB;gBACjFzV,IAAMC,OAAOC,OAAOC,QAAQC,eAAeN;gBAC3C,KAAKG;oBACJ,MAAM,IAAII,MAAM;;gBAGjBL,IAAMM,MAAML,KAAKM,cACXmV,OAAOpV,IAAIkV;gBACjB,KAAKE;oBACJ,MAAM,IAAIrV,MAAM;;gBAGjBL,IAAM2V,OAAOrV,IAAIK;gBAEjBqC,KAAK4S,OAAO,IAAIC,mBAAkBtS,OAAOoQ,OAAO8B,aAAa;oBAC5DzE,OAAO2E,KAAK3E;oBACZ4D,QAAQe,KAAKf;oBACbkB,iBAAiBxF,SAASqF,KAAKvF,MAAMlN,MAAM,IAAI;qBAGhD6S,SAASC,KAAKC,YAAYjT,KAAK4S,KAAKM,OACpClT,KAAK4S,KAAKO,QAEVnT,KAAKoT,MAAMtW;gBACXkD,KAAKqT,aAAaX,MAClB1S,KAAKsT,YAAYvW,UAEjBG,OAAOa,SAASwV,OAAOC,YAAYb,KAAKc;gBAExCzT,KAAKiC,cAAcjC,KAAKiC,YAAYyR,KAAK1T;;;;;;6BAG1CnD,qBAAU+C;;gBACT,wCAD0C,KACnC+T,UAAW3T,KAAKoT,KAAKpT,KAAKsT,WAC/BtU,eAAK1B;oBACLN,IAAM4W,aAAa,IAAI5T,OAAKqT;oBAE5BrT,OAAK6T,SAAS,IAAIvW,IAAIwW,OACtBpU,UAAUM,OAAK6T,QAAQjU,UAEvBW,OAAOC,iBAAiBtD,QAAQ;wBAC/B0W,YAAY;4BACXjT,OAAOiT;;wBAGRjU,OAAO;4BACNgB,OAAOX,OAAK6T;;wBAId3W,OAAOC,QAAQ4W,kBAAkBzW,IAAIK,WAAWb,KAEhDkD,OAAK4S,KAAKoB,UAEVhU,OAAK6T,OAAO5M,SAAS2M;oBAErB5T,OAAK4S,KAAKjT,MAAMsH,SAAS2M,WAAW/K;;gCAIvCvG;gBAGC,OAFApF,OAAOa,SAASwV,OAAOpV,iBAAiB,QAAQ6B,KAAKiC,cAE9CjC;gCAGRmT;gBAGC,OAFAjW,OAAOa,SAASwV,OAAOpN,oBAAoB,QAAQnG,KAAKiC,cAEjDjC;gCAGAiC;gBACPjC,KAAK6T,OAAO3R,iBACZlC,KAAKiU,IAAID;eAGVpJ,mBAAIqJ;gBACH,OAAOjU,KAAK4S;8EArFD7U;SAXd,CAAiBgR,kBAAAA;KADlB,CAAUA,SAAAA;QA+GIwD,SAASxD,KAAKhR,SAASwU;;"}