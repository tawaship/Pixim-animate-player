/*!
 * @tawaship/pixim-createjs-player.js - v1.0.0
 * 
 * @require pixi.js v5.3.3
 * @require @tawaship/pixim.js v1.6.0
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
this.Pixim=this.Pixim||{},function(t,e,i){"use strict";function r(t,e){var i=window.AdobeAn.getComposition(t);if(!i)throw new Error("no composition");var r=i.getLibrary();return new Promise((function(t,a){0===r.properties.manifest.length&&t({});var n=new createjs.LoadQueue(!1);if(n.installPlugin(createjs.Sound),n.addEventListener("fileload",(function(t){!function(t,e){var i=e.getImages();t&&"image"==t.item.type&&(i[t.item.id]=t.result)}(t,i)})),n.addEventListener("complete",(function(e){t(e)})),e){e=(e+"/").replace(/([^\:])\/\//,"$1/");for(var o=r.properties.manifest,s=0;s<o.length;s++)o[s].src=e+o[s].src}n.loadManifest(r.properties.manifest)})).then((function(t){for(var e=i.getSpriteSheet(),a=t.target,n=r.ssMetadata,o=0;o<n.length;o++)e[n[o].name]=new window.createjs.SpriteSheet({images:[a.getResult(n[o].name)],frames:n[o].frames});return r}))}function a(t,e){if((e=e||{}).useSynchedTimeline){function i(){for(var t=this.children.slice(),e=0,i=t.length;e<i;e++){var r=t[e];r.isVisible()&&r.draw()}return!0}Object.defineProperties(createjs.MovieClip.prototype,{draw:{value:function(){return this._updateState(),this._containerDraw()}},_containerDraw:{value:i}});var r={draw:{value:function(){return!0}}};Object.defineProperties(createjs.Sprite.prototype,r),Object.defineProperties(createjs.Graphics.prototype,r),Object.defineProperties(createjs.Shape.prototype,r),Object.defineProperties(createjs.Text.prototype,r),Object.defineProperties(createjs.Bitmap.prototype,r),t.update=function(t){this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),-1==this._autoPurge||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):this.draw(),this.dispatchEvent("drawend")},t.draw=i,t._updateFunction=t.update}else t._updateFunction=t.tick;t._handleTick?t._tickFunction=function(e){t._updateFunction(),t._handleTick()}:t._tickFunction=function(e){t._updateFunction()}}Object.defineProperties(window,{playSound:{value:function(t,e){return void 0===e&&(e=!1),window.createjs.Sound.play(t,{interrupt:window.createjs.Sound.INTERRUPT_EARLY,loop:e})}}});var n={DisplayObject:createjs.DisplayObject,MovieClip:createjs.MovieClip,Sprite:createjs.Sprite,Container:createjs.Container,Text:createjs.Text,Shape:createjs.Shape,Graphics:createjs.Graphics,ButtonHelper:createjs.ButtonHelper};var o=!1,s={mousedown:{types:["pointerdown"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.target._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,o=!0,e(t)}}},rollover:{types:["pointerover"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.target._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,o=!0,e(t)}}},rollout:{types:["pointerout"],factory:function(t,e){return function(t){t.currentTarget=t.currentTarget._createjs,t.target=t.currentTarget._createjs;var i=t.data;t.rawX=i.global.x,t.rawY=i.global.y,o=!0,e(t)}}},pressmove:{types:["pointermove"],factory:function(t,e){return function(i){if(o){i.currentTarget=t,i.target=i.target&&i.target._createjs;var r=i.data;i.rawX=r.global.x,i.rawY=r.global.y,e(i)}}}},pressup:{types:["pointerup","pointeupoutside"],factory:function(t,e){return function(i){if(o){i.currentTarget=t,o=!1,i.target=i.target&&i.target._createjs;var r=i.data;i.rawX=r.global.x,i.rawY=r.global.y,e(i)}}}}},p=Math.PI/180,c={x:{get:function(){return this._originParams.x},set:function(t){return this._pixiData.instance.x=t,this._originParams.x=t}},y:{get:function(){return this._originParams.y},set:function(t){return this._pixiData.instance.y=t,this._originParams.y=t}},scaleX:{get:function(){return this._originParams.scaleX},set:function(t){return this._pixiData.instance.scale.x=t,this._originParams.scaleX=t}},scaleY:{get:function(){return this._originParams.scaleY},set:function(t){return this._pixiData.instance.scale.y=t,this._originParams.scaleY=t}},skewX:{get:function(){return this._originParams.skewX},set:function(t){return this._pixiData.instance.skew.x=-t*p,this._originParams.skewX=t}},skewY:{get:function(){return this._originParams.skewY},set:function(t){return this._pixiData.instance.skew.y=t*p,this._originParams.skewY=t}},regX:{get:function(){return this._originParams.regX},set:function(t){return this._pixiData.regObj.x=t,this._originParams.regX=t}},regY:{get:function(){return this._originParams.regY},set:function(t){return this._pixiData.regObj.y=t,this._originParams.regY=t}},rotation:{get:function(){return this._originParams.rotation},set:function(t){return this._pixiData.instance.rotation=t*p,this._originParams.rotation=t}},visible:{get:function(){return this._originParams.visible},set:function(t){return t=!!t,this._pixiData.instance.visible=t,this._originParams.visible=t}},alpha:{get:function(){return this._originParams.alpha},set:function(t){return this._pixiData.instance.alpha=t,this._originParams.alpha=t}},_off:{get:function(){return this._originParams._off},set:function(t){return this._pixiData.instance.renderable=!t,this._originParams._off=t}},addEventListener:{value:function(t,e){if(e instanceof Function){if(t in s){for(var i=s[t],r=i.factory(this,e),a=i.types,o=0;o<a.length;o++){var p=a[o];this._pixiData.events[p]=this._pixiData.events[p]||[],this._pixiData.events[p].push({func:r,origin:e}),this._pixiData.instance.on(p,r)}this._pixiData.instance.interactive=!0}return n.DisplayObject.prototype.addEventListener.apply(this,arguments)}}},removeEventListener:{value:function(t,e){if(t in s)for(var i=s[t],r=i.types,a=0;a<r.length;a++){var o=r[a],p=this._pixiData.events[o];if(p){for(var c=p.length-1;c>=0;c--)if(p[c].origin===e){this._pixiData.instance.off(o,p[c].func),p.splice(c,1);break}0===p.length&&delete this._pixiData.events[o]}}var l=n.DisplayObject.prototype.removeEventListener.apply(this,arguments),h=this._listeners;if(!h)return l;for(var u in s)if(h[u]&&h[u].length>0)break;return l}},removeAllEventListeners:{value:function(t){return this._pixiData.instance.removeAllListeners(t),this._pixi.instance.interactive=!1,this._pixiData.events={},n.DisplayObject.prototype.removeAllEventListeners.apply(this,arguments)}},mask:{get:function(){return this._originParams.mask},set:function(t){return t?(t._pixiData.masked.push(this._pixiData.instance),this._pixiData.instance.mask=t._pixiData.instance,this._pixiData.instance.once("added",(function(){this.parent.addChild(t._pixiData.instance)}))):this._pixiData.instance.mask=null,this._originParams.mask=t}},filters:{get:function(){return this._originParams.filters},set:function(t){if(this._pixiData.subInstance)if(t){for(var i=[],r=0;r<t.length;r++){var a=t[r];if(!(a instanceof createjs.ColorMatrixFilter)){var n=new e.filters.ColorMatrixFilter;n.matrix=[a.redMultiplier,0,0,0,a.redOffset/255,0,a.greenMultiplier,0,0,a.greenOffset/255,0,0,a.blueMultiplier,0,a.blueOffset/255,0,0,0,a.alphaMultiplier,a.alphaOffset/255,0,0,0,0,1],i.push(n)}}for(var o=this._pixiData.instance,s=o.children,p=new e.Container,c=this._pixiData.subInstance=p.addChild(new e.Container);s.length;)c.addChild(s[0]);o.addChild(p),o._filterContainer=c,c.updateTransform(),c.calculateBounds();var l=c.getLocalBounds(),h=l.x,u=l.y;for(r=0;r<c.children.length;r++)c.children[r].x-=h,c.children[r].y-=u,c.children[r]._filterContainer&&(c.children[r]._filterContainer.cacheAsBitmap=!1);p.x=h,p.y=u,c.filters=i,c.cacheAsBitmap=!0}else{var _=this._pixiData.instance;if(_._filterContainer){var f=this._pixiData.subInstance,d=f.parent,g=f.children;for(_.removeChildren(),_._filterContainer=null;g.length;){var y=_.addChild(g[0]);y.x+=d.x,y.y+=d.y}f.filters=null,f.cacheAsBitmap=!1,this._pixiData.subInstance=_}}return this._originParams.filters=t}},getPixi:{value:function(){return this._pixiData.instance}}};function l(t,e){void 0===e&&(e=!1);var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._overrideCreatejs=function(t){var e,i;e=this,i=new t,e._originParams={x:0,y:0,scaleX:0,scaleY:0,regx:0,regy:0,skewX:0,skewY:0,rotation:0,visible:!0,alpha:1,_off:!1,mask:null,filters:null},i._createjs=e,e._pixiData={instance:i,regObj:i.anchor||i.pivot,events:{}}},e}(t);return e||Object.defineProperties(i.prototype,c),i}createjs.MovieClip=function(t){function i(){this._overrideCreatejs(e.Container),t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){return this._overrideCreatejs(e.Container),this._pixiData.subInstance=this._pixiData.instance,t.prototype.initialize.apply(this,arguments)},i.prototype.addChild=function(e){return this._pixiData.subInstance.addChild(e._pixiData.instance),t.prototype.addChild.call(this,e)},i.prototype.addChildAt=function(e,i){return this._pixiData.subInstance.addChildAt(e._pixiData.instance,i),t.prototype.addChildAt.call(this,e,i)},i.prototype.removeChild=function(e){return this._pixiData.subInstance.removeChild(e._pixiData.instance),t.prototype.removeChild.call(this,e)},i.prototype.removeChildAt=function(e){return this._pixiData.subInstance.removeChildAt(e),t.prototype.removeChildAt.call(this,e)},i.prototype.removeAllChldren=function(){return this._pixiData.subInstance.removeChildren(),t.prototype.removeAllChldren.call(this)},i}(l(n.MovieClip)),createjs.Sprite=function(t){function i(){this._overrideCreatejs(e.Sprite),t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){return this._overrideCreatejs(e.Sprite),t.prototype.initialize.apply(this,arguments)},i.prototype.gotoAndStop=function(){t.prototype.gotoAndStop.apply(this,arguments);var i=this.spriteSheet.getFrame(this.currentFrame),r=e.BaseTexture.from(i.image),a=new e.Texture(r,i.rect);this._pixiData.instance.texture=a},i}(l(n.Sprite)),createjs.Shape=function(t){function i(){this._overrideCreatejs(e.Container),this._pixiData.masked=[],t.apply(this,arguments)}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={graphics:{configurable:!0}};return r.graphics.get=function(){return this._graphics},r.graphics.set=function(t){if(this._pixiData.masked.length)if(this._pixiData.instance.removeChildren(),t)for(var e=0;e<this._pixiData.masked.length;e++)this._pixiData.masked[e].mask=this._pixiData.instance;else for(var i=0;i<this._pixiData.masked.length;i++)this._pixiData.masked[i].mask=null;return t&&this._pixiData.instance.addChild(t._pixiData.instance),this._graphics=t},Object.defineProperties(i.prototype,r),i}(l(n.Shape)),createjs.Graphics=function(t){function i(){this._overrideCreatejs(e.Graphics),this._pixiData.instance.beginFill(16772846,1),this._pixiData.strokeFill=0,this._pixiData.strokeAlpha=1,t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.moveTo=function(e,i){return this._pixiData.instance.clone().endFill().containsPoint({x:e,y:i})?this._pixiData.instance.beginHole():this._pixiData.instance.endHole(),this._pixiData.instance.moveTo(e,i),t.prototype.moveTo.call(this,e,i)},i.prototype.lineTo=function(e,i){return this._pixiData.instance.lineTo(e,i),t.prototype.lineTo.call(this,e,i)},i.prototype.arcTon=function(e,i,r,a,n){return this._pixiData.instance.arcTo(e,i,r,a,n),t.prototype.arcTo.call(this,e,i,r,a,n)},i.prototype.arc=function(e,i,r,a,n,o){return this._pixiData.instance.arc(e,i,r,a,n,o),t.prototype.arc.call(this,e,i,r,a,n,o)},i.prototype.quadraticCurveTo=function(e,i,r,a){return this._pixiData.instance.quadraticCurveTo(e,i,r,a),t.prototype.quadraticCurveTo.call(this,e,i,r,a)},i.prototype.bezierCurveTo=function(e,i,r,a,n,o){return this._pixiData.instance.bezierCurveTo(e,i,r,a,n,o),t.prototype.bezierCurveTo.call(this,e,i,r,a,n,o)},i.prototype.rect=function(e,i,r,a){return this._pixiData.instance.drawRect(e,i,r,a),t.prototype.rect.call(this,e,i,r,a)},i.prototype.closePath=function(){this._pixiData.instance.closePath();this._pixiData.instance.currentPath.points;return t.prototype.closePath.call(this)},i.prototype.clear=function(){return this._pixiData.instance.clear(),t.prototype.clear.call(this)},i.prototype._parseColor=function(t){var e={color:0,alpha:1};return t?"#"===t.charAt(0)?(e.color=parseInt(t.slice(1),16),e):(t=t.replace(/rgba|\(|\)|\s/g,"").split(","),e.color=65536*Number(t[0])+256*Number(t[1])+Number(t[2]),e.alpha=Number(t[3]),e):(e.alpha=0,e)},i.prototype.beginFill=function(e){var i=this._parseColor(e);return this._pixiData.instance.beginFill(i.color,i.alpha),t.prototype.beginFill.call(this,e)},i.prototype.endFill=function(){return this._pixiData.instance.endFill(),t.prototype.endFill.call(this)},i.prototype.setStrokeStyle=function(e,i,r,a,n){return this._pixiData.instance.lineStyle({width:e,color:this._pixiData.strokeFill,alpha:this._pixiData.strokeAlpha,cap:i in u?u[i]:i,join:r in _?_[r]:r,miterLimit:a}),t.prototype.setStrokeStyle.call(this,e,i,r,a,n)},i.prototype.beginStroke=function(e){var i=this._parseColor(e);return this._pixiData.strokeFill=i.color,this._pixiData.strokeAlpha=i.alpha,t.prototype.beginStroke.call(this,e)},i.prototype.drawRoundRect=function(e,i,r,a,n){return this._pixiData.instance.drawRoundedRect(e,i,r,a,n),t.prototype.drawRoundRect.call(this,e,i,r,a,n)},i.prototype.drawCircle=function(e,i,r){return this._pixiData.instance.drawCircle(e,i,r),t.prototype.drawCircle.call(this,e,i,r)},i.prototype.drawEllipse=function(e,i,r,a){return this._pixiData.instance.drawEllipse(e,i,r,a),t.prototype.drawEllipse.call(this,e,i,r,a)},i.prototype.drawPolyStar=function(e,i,r,a,n,o){return this._pixiData.instance.drawRegularPolygon(e,i,r,a,o*p),t.prototype.drawPolyStar.call(this,e,i,r,a,n,o)},i}(l(n.Graphics));var h,u={0:e.LINE_JOIN.BUTT,1:e.LINE_JOIN.ROUND,2:e.LINE_JOIN.SQUARE},_={0:e.LINE_JOIN.MITER,1:e.LINE_JOIN.ROUND,2:e.LINE_JOIN.BEVEL};Object.defineProperties(createjs.Graphics.prototype,{curveTo:{value:createjs.Graphics.prototype.quadraticCurveTo},drawRect:{value:createjs.Graphics.prototype.rect},mt:{value:createjs.Graphics.prototype.moveTo},lt:{value:createjs.Graphics.prototype.lineTo},at:{value:createjs.Graphics.prototype.arcTo},bt:{value:createjs.Graphics.prototype.bezierCurveTo},qt:{value:createjs.Graphics.prototype.quadraticCurveTo},a:{value:createjs.Graphics.prototype.arc},r:{value:createjs.Graphics.prototype.rect},cp:{value:createjs.Graphics.prototype.closePath},c:{value:createjs.Graphics.prototype.clear},f:{value:createjs.Graphics.prototype.beginFill},ef:{value:createjs.Graphics.prototype.endFill},ss:{value:createjs.Graphics.prototype.setStrokeStyle},s:{value:createjs.Graphics.prototype.beginStroke},dr:{value:createjs.Graphics.prototype.drawRect},rr:{value:createjs.Graphics.prototype.drawRoundRect},dc:{value:createjs.Graphics.prototype.drawCircle},de:{value:createjs.Graphics.prototype.drawEllipse},dp:{value:createjs.Graphics.prototype.drawPolyStar}}),createjs.Text=function(t){function i(i,r,a){this._overrideCreatejs(e.Container),this._originParams=Object.assign(this._originParams,{text:i,font:r,color:a,textAlign:"left",lineHeight:0,lineWidth:0});var n=this._parseFont(r);this._pixiData.instance.text=this._pixiData.instance.addChild(new e.Text(i,{fontSize:n.fontSize,fontFamily:n.fontFamily,fill:this._parseColor(a),wordWrap:!0})),t.apply(this,arguments)}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={text:{configurable:!0},font:{configurable:!0},color:{configurable:!0},textAlign:{configurable:!0},lineHeight:{configurable:!0},lineWidth:{configurable:!0}};return r.text.get=function(){return this._originParams.text},r.text.set=function(t){return this._pixiData.instance.text.text=t,this._align(this.textAlign),this._originParams.text=t},i.prototype._parseFont=function(t){var e=t.split(" ");return{fontSize:Number(e.shift().replace("px","")),fontFamily:e.join(" ").replace(/'/g,"")}},r.font.get=function(){return this._originParams.font},r.font.set=function(t){var e=this._parseFont(t);return this._pixiData.instance.text.style.fontSize=e.fontSize,this._pixiData.instance.text.style.fontFamily=e.fontFamily,this._originParams.font=t},i.prototype._parseColor=function(t){return parseInt(t.slice(1),16)},r.color.get=function(){return this._originParams.color},r.color.set=function(t){return this._pixiData.instance.text.style.fill=this._parseColor(t),this._originParams.color=t},i.prototype._align=function(t){"left"!==t?"center"!==t?"right"!==t||(this._pixiData.instance.text.x=-this.lineWidth):this._pixiData.instance.text.x=-this.lineWidth/2:this._pixiData.instance.text.x=0},r.textAlign.get=function(){return this._originParams.textAlign},r.textAlign.set=function(t){return this._pixiData.instance.text.style.align=t,this._align(t),this._originParams.textAlign=t},r.lineHeight.get=function(){return this._originParams.lineHeight},r.lineHeight.set=function(t){return this._pixiData.instance.text.lineHeight=t,this._originParams.lineHeight=t},r.lineWidth.get=function(){return this._originParams.lineWidth},r.lineWidth.set=function(t){return this._pixiData.instance.text.lineWidthWrap=t,this._originParams.lineWidth=t},Object.defineProperties(i.prototype,r),i}(l(n.Text)),createjs.ButtonHelper=function(t){function i(){this._overrideCreatejs(e.Container);var i=arguments[0],r=i._pixiData.instance,a=arguments[1],n=arguments[2],o=arguments[3],s=arguments[5],p=arguments[6];s.gotoAndStop(p);var c=r.addChild(s._pixiData.instance);c.alpha=1e-5;var l=!1,h=!1;c.on("pointerover",(function(){l=!0,h?i.gotoAndStop(o):i.gotoAndStop(n)})),c.on("pointerout",(function(){l=!1,h?i.gotoAndStop(n):i.gotoAndStop(a)})),c.on("pointerdown",(function(){h=!0,i.gotoAndStop(o)})),c.on("pointerup",(function(){h=!1,l?i.gotoAndStop(n):i.gotoAndStop(a)})),c.on("pointerupoutside",(function(){h=!1,l?i.gotoAndStop(n):i.gotoAndStop(a)})),c.interactive=!0,c.cursor="pointer",t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(l(n.ButtonHelper,!0)),function(t){!function(t){var e=function(t){function e(e,i,r,a,n){void 0===a&&(a={}),void 0===n&&(n={});var o=window.AdobeAn.getComposition(e);if(!o)throw new Error("no composition");var s=o.getLibrary(),p=s[i];if(!p)throw new Error("no root class");var c=s.properties;t.call(this,Object.assign(a,{width:c.width,height:c.height,backgroundColor:parseInt(c.color.slice(1),16)}),n),this._id=e,this._rootClass=p,this._basepath=r,window.createjs.Ticker.framerate=c.fps,this._handleTick=this._handleTick.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAsync=function(t){var e=this;return void 0===t&&(t={}),r(this._id,this._basepath).then((function(r){var n=new e._rootClass;e._stage=new r.Stage,a(e._stage,t),Object.defineProperties(window,{exportRoot:{value:n},stage:{value:e._stage}}),window.AdobeAn.compositionLoaded(r.properties.id);var o=i.Content.create();o.defineLibraries({root:function(t){function e(e){t.call(this),this.addChild(e.vars.root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i.Container)});var s=new o;return s.addVars({root:n.getPixi()}),e.app.render(),e._stage.addChild(n),e.attachAsync(s)}))},e.prototype.play=function(){return window.createjs.Ticker.addEventListener("tick",this._handleTick),this},e.prototype.stop=function(){return window.createjs.Ticker.removeEventListener("tick",this._handleTick),this},e.prototype._handleTick=function(){this._stage._tickFunction(),this.app.render()},e}(i.Application);t.Player=e}(t.createjs||(t.createjs={}))}(h||(h={}));var f=h.createjs.Player;t.Player=f}(this.Pixim.createjs=this.Pixim.createjs||{},PIXI,Pixim);//# sourceMappingURL=Pixim-createjs-player.min.js.map
